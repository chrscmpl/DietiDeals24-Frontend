import{a as P}from"./chunk-C6O6P6QR.js";import{a as U}from"./chunk-2CJT4ORM.js";import{A as u,B as A,C as q,D as b,F as S,G as H,c as M,s as F}from"./chunk-LCU4DL3S.js";import{C as O,E as l,F as $,Hb as x,Ia as _,Ib as E,Jb as I,K as m,N as p,Qb as N,V as d,X as f,Y as v,_ as C,aa as w,fa as h,gc as L,ka as a,l as y,qa as B,u as o}from"./chunk-BYEFBY3C.js";var j=class{cloneTruthy(e){let c={};for(let t of Object.entries(e).filter(r=>!!r[1]))c[t[0]]=t[1];return c}compareOwnProperties(e,c){let t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(c);if(t.length!==r.length)return!1;for(let n of t)if(e[n]!==c[n])return!1;return!0}splitArray(e,c){let t=[];return{success:e.filter(n=>c(n)?!0:(t.push(n),!1)),failure:t}}},R=new j;var k=function(s){return s.trending="trending",s.expiration="expiration",s}(k||{});var D=(()=>{let e=class e{constructor(t){this.http=t,this._trendingCategories=null,this._categories=null,this.trendingCategoriesSubject=new y(1),this.categoriesSubject=new y(1),this.categories$=this.categoriesSubject.asObservable().pipe(o(()=>this.categories??{})),this.macroCategories$=this.categoriesSubject.asObservable().pipe(o(()=>this.macroCategories??[])),this.trendingCategories$=this.trendingCategoriesSubject.asObservable().pipe(o(()=>this._trendingCategories??[])),this.refreshCategories()}get trendingCategories(){return this._trendingCategories}get categories(){return this._categories}get macroCategories(){return this.categories?Object.keys(this.categories):null}refreshTrendingCategories(t){this.http.get(`${P.backendHost}/info/trending-categories`).pipe(C(r=>{this._trendingCategories=r,this.trendingCategoriesSubject.next()})).subscribe(t)}refreshCategories(t){this.http.get(`${P.backendHost}/categories`).pipe(o(r=>{let n={};return Object.keys(r).forEach(i=>{n[i]=r[i].sort()}),n}),C(r=>{this._categories=r,this.categoriesSubject.next()})).subscribe(t)}};e.\u0275fac=function(r){return new(r||e)(a(F))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var K=(()=>{let e=class e{constructor(t,r,n,i){this.categoriesService=t,this.route=r,this.location=n,this.router=i,this.lastSearchParameters={},this.validatedSearchParameters$=this.router.events.pipe(l(g=>g instanceof u&&/^\/auctions(\?.*)?$/.test(g.urlAfterRedirects)),v(()=>this.route.queryParams.pipe(m(1))),p(),w(this.categoriesService.categories$.pipe(f({}))),o(([g,V])=>{let W=this.getValidatedParams(g,V);return this.lastSearchParameters=R.cloneTruthy(W),this.location.replaceState(this.location.path().split("?")[0],new URLSearchParams(this.lastSearchParameters).toString()),this.lastSearchParameters}),f(this.lastSearchParameters),p(R.compareOwnProperties),d(1)),this.validatedSearchParameters$.subscribe()}getValidatedParams(t,r){return{keywords:this.validateKeywords(t.keywords),type:this.validateType(t.type),macroCategory:this.validateMacroCategory(t.macroCategory,r),category:this.validateCategory(t.category,r),policy:this.validatePolicy(t.policy)}}validateKeywords(t){return t==this.lastSearchParameters.keywords?t??null:(t=t?.trim(),!t||t.length===0?null:t)}validateType(t){return t==this.lastSearchParameters.type?t??null:!t||!Object.keys(U).includes(t)?null:t}validateMacroCategory(t,r){return t==this.lastSearchParameters.macroCategory?t??null:!t||!Object.keys(r).includes(t)?null:t}validateCategory(t,r){return t==this.lastSearchParameters.category?t??null:!t||!Object.values(r).flat().includes(t)?null:t}validatePolicy(t){return t==this.lastSearchParameters.policy?t??null:!t||!Object.keys(k).includes(t)?null:t}};e.\u0275fac=function(r){return new(r||e)(a(D),a(b),a(M),a(S))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var ut=(()=>{let e=class e{constructor(t,r,n){this.router=t,this.route=r,this.searchService=n,this._routeBeforeRedirection=null,this._routeBeforeTransaction=null,this.navigationEnd$=this.router.events.pipe(l(i=>i instanceof u)),this.isCurrentNavigationSuccessful$=this.router.events.pipe(l(i=>i instanceof A||i instanceof q||i instanceof u),m(1),o(i=>i instanceof u)),this.currentLocation$=this.router.events.pipe(l(i=>i instanceof u),f(null),v(()=>O(this.route.queryParams,this.searchService.validatedSearchParameters$).pipe($(100))),o(i=>({path:this.getCurrentPath(),query:i})),p(),d(1)),this.currentPath$=this.currentLocation$.pipe(o(i=>i.path)),this.currentQuery$=this.currentLocation$.pipe(o(i=>i.query))}executeIfNavigationSuccessful(t){this.isCurrentNavigationSuccessful$.subscribe(r=>{r&&t()})}executeIfNavigationFailure(t){this.isCurrentNavigationSuccessful$.subscribe(r=>{r||t()})}navigateToRouteBeforeRedirection(){this.navigateToSavedRoute(this._routeBeforeRedirection),this._routeBeforeRedirection=null}navigateRedirectingBack(t){this.routeBeforeRedirection=this.router.url,this.router.navigate([t])}navigateToRouteBeforeTransaction(){this.navigateToSavedRoute(this._routeBeforeTransaction),this._routeBeforeTransaction=null}set routeBeforeRedirection(t){this._routeBeforeRedirection=t}set routeBeforeTransaction(t){this._routeBeforeTransaction=t}get primaryOutletRoute(){return this.router.url.replace(/\(.*?\)/g,"")}navigateToSavedRoute(t){t=t||"/",this.executeIfNavigationFailure(()=>this.router.navigate(["/"])),this.router.navigate([t])}getCurrentPath(){return this.router.parseUrl(this.router.url).root.children.primary?.segments.map(n=>n.path)??[]}};e.\u0275fac=function(r){return new(r||e)(a(S),a(b),a(K))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var mt=(()=>{let e=class e{constructor(){this.clickEvent=new _}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=B({type:e,selectors:[["dd24-logo"]],outputs:{clickEvent:"clickEvent"},standalone:!0,features:[L],decls:2,vars:0,consts:[["routerLink","/home","tabindex","0",1,"logo-container",3,"click","keypress"],["src","assets/logo.svg","alt","logo",1,"logo"]],template:function(r,n){r&1&&(x(0,"div",0),N("click",function(){return n.clickEvent.emit()})("keypress",function(){return n.clickEvent.emit()}),I(1,"img",1),E())},dependencies:[H],styles:[".logo-container[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{width:100%;height:100%}.logo-container[_ngcontent-%COMP%]{cursor:pointer}"]});let s=e;return s})();export{k as a,D as b,R as c,K as d,ut as e,mt as f};
