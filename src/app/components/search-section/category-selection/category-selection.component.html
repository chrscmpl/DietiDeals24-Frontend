<form [formGroup]="form" class="category-selector">
    <p-dropdown
        [options]="(currentOptions$ | async) ?? [allCategoriesGroup]"
        [formControlName]="controlName"
        optionLabel="name"
        optionValue="value"
        [filter]="true"
        [group]="true"
        optionGroupLabel="groupName"
        optionGroupChildren="items"
        scrollHeight="20em"
    >
        <ng-template let-group pTemplate="group">
            @if (group.groupName !== "All") {
                <p-tabMenu
                    [model]="tabs"
                    [(activeItem)]="currentTab"
                ></p-tabMenu>
            }
        </ng-template>
        <ng-template let-item pTemplate="item">
            @if (
                item.macroCategory === selectedMacroCategory ||
                item.macroCategory === MACROCATEGORIES.All
            ) {
                <span class="item-label">{{ item.name }}</span>
            }
        </ng-template>
        <ng-template pTemplate="empty"></ng-template>
    </p-dropdown>
</form>
