import{J as N,K as $t,L as k,M as A,P as J,R as Ft,V as P,e as jt,g as Ut,ia as Lt,la as Rt,ma as at,x as zt,y as Dt,z as V}from"./chunk-23PLDCXR.js";import{$a as E,$b as Pt,A as ht,Ac as kt,Ba as wt,Cb as p,Db as y,Eb as xt,F as L,Ga as M,I as H,Jb as G,Ka as B,Lb as St,Ma as K,Na as vt,Pa as x,Q as gt,R as ft,Ua as c,Va as u,Wa as v,X as w,Zb as Mt,_ as h,_a as W,_b as At,a as dt,ab as f,ac as Ot,ba as U,bc as It,ea as S,h as ut,ia as q,j as lt,ja as Y,jc as Tt,kb as l,lb as R,mb as z,nb as bt,o as $,oa as yt,q as ot,r as F,sa as Ct,t as mt,ta as _t,tb as D,ub as Bt,va as s,vb as Z,wa as m,z as pt,zc as Et}from"./chunk-N2EQA6T4.js";var Q=function(i){return i.buying="buying",i.selling="selling",i}(Q||{});var st=function(i){return i.active="active",i.pending="pending",i.aborted="aborted",i.rejected="rejected",i.accepted="closed",i}(st||{});var g=(()=>{let e=class e{constructor(t){this._ownBid=null,this._user=null,this._lastBidder=null,this._id=String(t.id),this._title=t.title,this._conditions=t.conditions??null,this._country=t.country,this._city=t.city,this._endTime=new Date(t.endTime),this._status=t.status,this._currency=t.currency,this._category=t.category??null,this._description=t.description??null,this._bids=t.numberOfBids??null,this._userId=t.userId!==null?String(t.userId):null,this._lastBidderId=t.currentBidderId!==null?String(t.currentBidderId):null,this._picturesUrls=t.picturesUrls&&t.picturesUrls.length>0?t.picturesUrls:t.picturesUrl?[t.picturesUrl]:[],this._ownBid=t.ownBid??(t.ownBids?.length?t.ownBids?.[t.ownBids?.length-1]?.bidAmount:null)??null,this._isOver=this._status!==e.STATUSES.active}get id(){return this._id}get title(){return this._title}get conditions(){return this._conditions}get country(){return this._country}get city(){return this._city}get endTime(){return this._endTime}get status(){return this._status}get currency(){return this._currency}get category(){return this._category}get description(){return this._description}get bids(){return this._bids}get userId(){return this._userId}get lastBidderId(){return this._lastBidderId}get picturesUrls(){return this._picturesUrls}get pictureUrl(){return this._picturesUrls[0]??null}get ownBid(){return this._ownBid}get user(){return this._user}set user(t){this._user=t}get lastBidder(){return this._lastBidder}set lastBidder(t){this._lastBidder=t}get winner(){return this._lastBidder}set winner(t){this._lastBidder=t}get ownerUsername(){return this._user?.username??null}get winnerUsername(){return this._lastBidder?.username??null}get isOver(){return this._isOver}};e.STATUSES=st,e.TYPES=k;let i=e;return i})(),Vt=class extends g{constructor(e){super(e),this._highestBid=null,this._minimumBid=e.minimumBid??e.startingBid??e.lastBid,this._highestBid=e.highestBidSoFar??null}get minimumBid(){return this._minimumBid}get lastBid(){return this._highestBid??this._minimumBid}get winningBid(){return this._isOver?this._highestBid:null}get winnerId(){return this._isOver?this._lastBidderId:null}get lastBidDescription(){return this._highestBid?"highest bid":"minimum bid"}get ruleset(){return k.silent}get kind(){return Q.selling}canBeBiddenOn(){return!this._ownBid}validateBid(e){return e<this._minimumBid?{min:!0}:null}newBidDescription(){return`at least CURRENCY{${this._minimumBid}|${this.currency}}`}getErrorMessage(e){return e==="min"?`Bid must be at least CURRENCY{${this._minimumBid}|${this.currency}}`:""}},Pe=(()=>{let e=class e extends g{constructor(t){super(t),this._maximumStartingBid=t.maximumBid??t.startingBid??t.lastBid,this._lowestBid=t.lowestBidSoFar??this._maximumStartingBid,this._ownBid!==this._lowestBid&&(this._ownBid=null)}get maximumStartingBid(){return this._maximumStartingBid}get lowestBid(){return this._lowestBid}get lastBid(){return this._lowestBid}get winningBid(){return this._isOver?this._lowestBid:null}get winnerId(){return this._isOver?this._lastBidderId:null}get lastBidDescription(){return this._lowestBid===this._maximumStartingBid?"maximum starting bid":"lowest bid"}get ruleset(){return k.reverse}get kind(){return Q.buying}canBeBiddenOn(){return!this._ownBid||this._ownBid>this._lowestBid}nextValidBid(){return this._lowestBid-e.MINIMUM_BID_DIFFERENCE>0?this._lowestBid-e.MINIMUM_BID_DIFFERENCE:this._lowestBid-.01}validateBid(t){return t>this.nextValidBid()?{max:!0}:t<0?{min:!0}:null}newBidDescription(){return`no more than CURRENCY{${this.nextValidBid()}|${this.currency}}`}getErrorMessage(t){return t==="max"?`Bid must not be higher than CURRENCY{${this.nextValidBid()}|${this.currency}}`:"Bid must not be negative"}};e.MINIMUM_BID_DIFFERENCE=1;let i=e;return i})();var ee=()=>["help"],ie=i=>({overlay:null,primary:i}),ne=i=>({outlets:i}),re=i=>["/",i],Nt=(()=>{let e=class e{constructor(){}stopPropagation(t){t.stopPropagation()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=U({type:e,selectors:[["dd24-auction-ruleset-link"]],inputs:{ruleset:"ruleset"},standalone:!0,features:[D],decls:5,vars:12,consts:[[1,"auction-type"],["tabindex","0",1,"auction-type-link",3,"click","keypress","routerLink","fragment"],[1,"pi","pi-info-circle"]],template:function(n,r){n&1&&(c(0,"span",0),l(1),p(2,"uppercase"),c(3,"span",1),E("click",function(b){return r.stopPropagation(b)})("keypress",function(b){return r.stopPropagation(b)}),v(4,"i",2),u()()),n&2&&(s(),z("",y(2,3,r.ruleset+" AUCTION")," "),s(2),B("routerLink",Z(10,re,Z(8,ne,Z(6,ie,Bt(5,ee)))))("fragment",r.ruleset+"-auction"))},dependencies:[At,kt],styles:[".auction-type[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-items:center;gap:.5ch;flex-wrap:nowrap;font-size:var(--font-size-large);color:var(--accent-color-2);font-weight:var(--font-weight-bolder);text-overflow:ellipsis;white-space:nowrap}.auction-type-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer}.auction-type-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:var(--font-size-large);color:var(--accent-color-2);font-weight:var(--font-weight-bolder)}"]});let i=e;return i})();var Ht=(()=>{let e=class e{transform(t){return t.charAt(0).toUpperCase()+t.slice(1)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=S({name:"oneCharUpper",type:e,pure:!0,standalone:!0});let i=e;return i})();var qt=(()=>{let e=class e{constructor(t){this.locale=t,this.datePipe=new Pt(t)}transform(t){let n=new Date(t),r=this.dayDifference(n);return r<0?this.datePipe.transform(n,"dd/MM/yyyy"):r===0?this.datePipe.transform(n,"'today at' HH:mm"):r<=1?this.datePipe.transform(n,"'tomorrow at' HH:mm"):r<7?this.datePipe.transform(n,"EEEE 'at' HH:mm"):this.datePipe.transform(n,"EEEE dd/MM/yyyy 'at' HH:mm")}dayDifference(t){let n=new Date().setHours(0,0,0,0);return(new Date(t).setHours(0,0,0,0)-n)/(1e3*60*60*24)}};e.\u0275fac=function(n){return new(n||e)(m(G,16))},e.\u0275pipe=S({name:"localDate",type:e,pure:!0,standalone:!0});let i=e;return i})();var d=function(i){return i[i.years=0]="years",i[i.months=1]="months",i[i.days=2]="days",i[i.hours=3]="hours",i[i.minutes=4]="minutes",i[i.seconds=5]="seconds",i}(d||{}),Yt=(()=>{let e=class e{transform(t,n="seconds"){let r=n in d?d[n]:d.seconds;if(t<=0)return"now";let a=this.getValues(t,r);return a.years||a.months||a.days||r<d.days?this.buildLongString(a,r):this.buildShortString(a,r)}buildLongString(t,n){let{years:r,months:a,days:b,hours:_,minutes:I,seconds:Xt}=t,T=[];return r&&T.push(this.pluralize("year",r)),(a||r)&&n>=d.months&&T.push(this.pluralize("month",a)),n>=d.days&&T.push(this.pluralize("day",b)),n>=d.hours&&T.push(this.pluralize("hour",_)),n>=d.minutes&&T.push(this.pluralize("minute",I)),n>=d.seconds&&T.push(this.pluralize("second",Xt)),T.filter(te=>te.length).join(", ")}buildShortString(t,n){let{hours:r,minutes:a,seconds:b}=t,_=[];return _.push(this.formatNumber(r)),n>=d.minutes&&_.push(this.formatNumber(a)),n>=d.seconds&&_.push(this.formatNumber(b)),_.join(":")}getValues(t,n){let r={};return r.years=Math.floor(t/31536e3),n===d.years||(t%=31536e3,r.months=Math.floor(t/2592e3),n===d.months)||(t%=2592e3,r.days=Math.floor(t/86400),n===d.days)||(t%=86400,r.hours=Math.floor(t/3600),n===d.hours)||(t%=3600,r.minutes=Math.floor(t/60),n===d.minutes)||(r.seconds=t%60),r}pluralize(t,n){return n?`${n} ${t}${n!==1?"s":""}`:""}formatNumber(t){return t=t??0,t<10?`0${t}`:t.toString()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=S({name:"interval",type:e,pure:!0,standalone:!0});let i=e;return i})();var Kt=(()=>{let e=class e{constructor(t){this.zone=t,this._nextMinute$=new lt,this.nextMinute$=this._nextMinute$.asObservable(),this.zone.runOutsideAngular(()=>{pt(6e4-Date.now()%6e4).pipe(ft(()=>ht(6e4).pipe(gt(0)))).subscribe(()=>this.zone.run(()=>this._nextMinute$.next()))})}};e.\u0275fac=function(n){return new(n||e)(h(wt))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Wt=(()=>{let e=class e{constructor(t,n){this.timer=t,this.changeDetector=n,this.timeAmount=0}ngOnInit(){this.updateTimer(),this.timerSubscription=this.timer.nextMinute$.subscribe(()=>{this.updateTimer(),this.changeDetector.markForCheck(),this.timeAmount<=0&&this.timerSubscription.unsubscribe()})}updateTimer(){this.timeAmount=Math.floor((this.endDate.getTime()-Date.now())/1e3)}ngOnDestroy(){this.timerSubscription.unsubscribe()}};e.\u0275fac=function(n){return new(n||e)(m(Kt),m(St))},e.\u0275cmp=U({type:e,selectors:[["dd24-timer"]],inputs:{endDate:"endDate"},standalone:!0,features:[D],decls:3,vars:6,consts:[[1,"auction-card-time-left-amount"]],template:function(n,r){n&1&&(c(0,"span",0),l(1),p(2,"interval"),u()),n&2&&(K("danger",r.timeAmount>0&&r.timeAmount<86400),s(),R(xt(2,3,r.timeAmount,"minutes")))},dependencies:[Yt]});let i=e;return i})();var ct=function(i){return i.bid="bid",i.conclude="conclude",i}(ct||{});var Zt=(()=>{let e=class e{constructor(t,n){this.locale=t,this.authentication=n,this.currencyPipe=new Ot(t)}transform(t){return t.status===g.STATUSES.active?ot(this.transformActive(t)):t.status===g.STATUSES.pending?ot(this.transformPending(t)):this.authentication.isLogged$.pipe(mt(()=>t.status===g.STATUSES.accepted?this.transformAccepted(t,this.authentication.loggedUser?.id??null):t.status===g.STATUSES.rejected?this.transformRejected(t,this.authentication.loggedUser?.id??null):t.status===g.STATUSES.aborted?this.transformAborted(t):""),H(1))}transformActive(t){return t.ownBid!==null?`your bid: ${this.transformBidAmount(t.ownBid,t.currency)}`:`${t.lastBidDescription}: ${this.transformBidAmount(t.lastBid,t.currency)}`}transformPending(t){return t.ownBid&&t.ownBid===t.winningBid?`your bid of ${this.transformBidAmount(t.ownBid,t.currency)} won`:`winning bid: ${this.transformBidAmount(t.winningBid,t.currency)}${t.winnerUsername?` by ${t.winnerUsername}`:""}`}transformAccepted(t,n){return this.transformAcceptedOrRejected(t,"accepted",n)}transformRejected(t,n){return this.transformAcceptedOrRejected(t,"rejected",n)}transformAcceptedOrRejected(t,n,r){return r!==null&&r===t.userId?`You ${n} this bid: ${this.transformBidAmount(t.lastBid,t.currency)}${t.winnerUsername?` by ${t.winnerUsername}`:""}`:r!==null&&r===t.lastBidderId?`Your bid of ${this.transformBidAmount(t.lastBid,t.currency)} was ${n}${t.ownerUsername?` by ${t.ownerUsername}`:""}`:t.ownerUsername?`${t.ownerUsername} ${n} a bid of ${this.transformBidAmount(t.lastBid,t.currency)}${t.winnerUsername?` by ${t.winnerUsername}`:""}`:`${n} bid: ${this.transformBidAmount(t.lastBid,t.currency)}${t.winnerUsername?` by ${t.winnerUsername}`:""}`}transformAborted(t){return`This auction was canceled by ${t.ownerUsername?` by ${t.ownerUsername}`:"its owner"}`}transformBidAmount(t,n){return`<span class="auction-bid-amount">${this.currencyPipe.transform(t,n)}</span>`}};e.\u0275fac=function(n){return new(n||e)(m(G,16),m(J,16))},e.\u0275pipe=S({name:"auctionStatusDescription",type:e,pure:!0,standalone:!0});let i=e;return i})();var X=class extends A{constructor(e){super(e)}};var tt=class extends A{constructor(e){super(e)}};var et=class extends A{constructor(e){super(e)}};var it=class extends A{constructor(e){super(e)}};var Gt=(()=>{let e=class e{serialize(t){if(!t.category)throw new Error("AuctionSerializer: category is required");let n=t.ruleset===k.silent?"minimumBid":t.ruleset===k.reverse?"maximumBid":"startingBid";return{auctionType:t.ruleset,itemCategory:t.category,itemName:t.details.title,itemCondition:t.details.conditions,description:t.details.description,country:t.details.country,city:t.details.city,currency:t.details.currency,endTime:t.details.endTime.toISOString().replace(/\.[0-9]{3}/,""),picturesUrls:t.pictures.map(r=>r.url),[n]:t.details.startingBid}}serializeArray(t){return t.map(n=>this.serialize(n))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var nt=class{constructor(e,o){this._token=e,this._cardNumberLastDigits=o}get token(){return this._token}get cardNumberLastDigits(){return this._cardNumberLastDigits}},rt=class{constructor(e){this._iban=e}get iban(){return this._iban}};var Jt=(()=>{let e=class e{serialize(t){if(t instanceof rt)return{type:at.IBAN,ibanString:t.iban};if(t instanceof nt)return{type:at.creditCard,last4digits:t.cardNumberLastDigits,creditCardToken:t.token};throw new Error(`AuthorizedPaymentMethodSerializer: unsupported payment method type ${t.constructor.name}`)}serializeArray(t){return t.map(n=>this.serialize(n))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Qt=(()=>{let e=class e{constructor(t){this.authorizedPaymentMethodSerializer=t}serialize(t){if(t.paymentMethod&&!t.paymentMethod.id&&!t.paymentMethod.data)throw new Error("AuctionConclusionSerializer: invalid auction conclusion payment method");let n={};if(t.paymentMethod){let r=t.paymentMethod.id?"paymentMethodId":t.paymentMethod.save?"paymentMethodToBeSaved":"oneTimePaymentMethod";n[r]=t.paymentMethod.id??this.authorizedPaymentMethodSerializer.serialize(t.paymentMethod.data)}return dt({auctionId:t.auctionId},n)}serializeArray(t){return t.map(n=>this.serialize(n))}};e.\u0275fac=function(n){return new(n||e)(h(Jt))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var j=class j{get auctionCreationLastReachedStep(){return this._auctionCreationLastReachedStep}get auctionCreationActiveStep(){return this._auctionCreationActiveStep}set auctionCreationActiveStep(e){this._auctionCreationActiveStep=e,e>this.auctionCreationLastReachedStep&&(this._auctionCreationLastReachedStep=e)}constructor(e,o,t,n,r,a,b){this.http=e,this.formBuilder=o,this.categoriesService=t,this.auctionCreationSerializer=n,this.auctionAcceptanceDataSerializer=r,this.confirmation=a,this.message=b,this._auctionCreationActiveStep=0,this._auctionCreationLastReachedStep=0,this.lastValidCategory=null,this.isAuctionCreationCategoryAProduct=null,this.auctionCreationForm=this.formBuilder.group({ruleset:this.formBuilder.control(null,[P.required]),category:this.formBuilder.control(null,{validators:[this.validateCategory.bind(this)],updateOn:"submit"}),details:this.formBuilder.group({title:this.formBuilder.control(null,{validators:[P.required]}),conditions:this.formBuilder.control(null,{validators:[this.validateConditions.bind(this)]}),description:this.formBuilder.control(null),country:this.formBuilder.control(null,{validators:[P.required]}),city:this.formBuilder.control(null,{validators:[P.required]}),startingBid:this.formBuilder.control(null,{validators:[P.required]}),currency:this.formBuilder.control("EUR",{validators:[P.required]}),endTime:this.formBuilder.control(null,{validators:[P.required]})}),pictures:this.formBuilder.control([])}),this.auctionCreationForm.controls.details.controls.city.disable(),this.categoriesService.categories$.subscribe(_=>{this.categories=_}),this.categoriesService.refreshCategories(),this.auctionCreationForm.controls.details.controls.country.valueChanges.subscribe(_=>{let I=this.auctionCreationForm.controls.details.controls.city;I.setValue(null),I.markAsUntouched(),I.markAsPristine(),_?I.enable():I.disable()}),this.auctionCreationForm.controls.category.valueChanges.subscribe(()=>{this.isAuctionCreationCategoryAProduct=null})}resetAuctionCreation(){this.auctionCreationForm.reset(),this.auctionCreationForm.controls.details.controls.currency.setValue("EUR"),this.auctionCreationForm.controls.details.controls.city.disable(),this.isAuctionCreationCategoryAProduct=null,this._auctionCreationActiveStep=0,this._auctionCreationLastReachedStep=0}validateCategory(e){if(!e.value)return{required:!0};if(e.value===this.lastValidCategory)return null;let o=Object.values(this.categories).flat().concat(Object.keys(this.categories)),t=o.findIndex(n=>n.toLowerCase()===e.value.toLowerCase());return t===-1?{invalid:!0}:(this.lastValidCategory=o[t],e.setValue(this.lastValidCategory),null)}validateConditions(e){return this.isAuctionCreationCategoryAProduct===null&&(this.isAuctionCreationCategoryAProduct=this.auctionCreationForm?.controls?.category?.value?this.categoriesService.isProduct(this.auctionCreationForm.controls.category.value):!1),!this.isAuctionCreationCategoryAProduct||e.value?null:{required:!0}}createAuction(e,o){this.createAuctionObservable(e).subscribe(o)}createAuctionObservable(e){return this.http.post("auctions/new",this.auctionCreationSerializer.serialize(e),{responseType:"text"}).pipe(L(o=>F(()=>new et(o))))}acceptBid(e){return this.http.post("auctions/close",this.auctionAcceptanceDataSerializer.serialize(e),{responseType:"text"}).pipe(L(o=>F(()=>new X(o))))}rejectBid(e){return this.http.delete("auctions/reject",{responseType:"text",params:{auctionId:e}}).pipe(L(o=>F(()=>new tt(o))))}showAbortDialog(e){return new ut(o=>{this.confirmation.confirm({header:"Are you sure?",message:"Are you sure you want to abort this auction? You won't be able to undo this action.",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",acceptIcon:"pi pi-exclamation-triangle",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-arrow-left",rejectButtonStyleClass:"p-button-outlined",reject:()=>o.next(),dismissableMask:!0,closeOnEscape:!0,accept:()=>this.abortAuction(e).subscribe({next:()=>{o.next(),this.message.add({severity:"success",summary:"Auction deleted successfully"})},error:t=>{o.error(t),this.message.add({severity:"error",summary:t.message})}})})}).pipe(H(1))}abortAuction(e){return this.http.delete("auctions/abort",{responseType:"text",params:{auctionId:e}}).pipe(L(o=>F(()=>new it(o))))}};j.\u0275fac=function(o){return new(o||j)(h(Tt),h(Lt),h(Rt),h(Gt),h(Qt),h(jt),h(Ut))},j.\u0275prov=w({token:j,factory:j.\u0275fac,providedIn:"root"});var O=j;$([V({cacheBusterNotifier:N.ownActiveAuctions$})],O.prototype,"createAuctionObservable",null);$([V({cacheBusterNotifier:N.ownActiveAuctions$})],O.prototype,"acceptBid",null);$([V({cacheBusterNotifier:N.ownActiveAuctions$})],O.prototype,"rejectBid",null);$([V({cacheBusterNotifier:N.ownActiveAuctions$})],O.prototype,"abortAuction",null);function le(i,e){if(i&1){let o=W();c(0,"img",14),E("error",function(){q(o);let n=f();return Y(n.onImageError())}),u()}if(i&2){let o=f();B("src",o.auction.pictureUrl,_t)}}function me(i,e){i&1&&v(0,"i",15)}function pe(i,e){i&1&&v(0,"div",3)}function he(i,e){if(i&1&&l(0),i&2){let o=f();z(" ",o.auction.conditions," | ")}}function ge(i,e){i&1&&l(0," Time left: ")}function fe(i,e){if(i&1&&(l(0),p(1,"localDate")),i&2){let o=f(2);z(" (Until ",y(1,1,o.auction.endTime),") ")}}function ye(i,e){if(i&1&&(M(0,ge,1,0),p(1,"async"),v(2,"dd24-timer",16),M(3,fe,2,3),p(4,"async")),i&2){let o=f();x(0,y(1,3,o.windowService.isMobile$)===!1?0:-1),s(2),B("endDate",o.auction.endTime),s(),x(3,y(4,5,o.windowService.isMobile$)===!1?3:-1)}}function Ce(i,e){if(i&1&&(c(0,"span",17),v(1,"i",18),l(2,"\xA0 The auction is pending, you have "),v(3,"dd24-timer",19),l(4," left to choose "),u()),i&2){let o=f();s(3),B("endDate",o.pendingEndTime)}}function _e(i,e){if(i&1&&(c(0,"span"),l(1),p(2,"localDate"),u()),i&2){let o=f();s(),z("Ended ",y(2,1,o.auction.endTime),"")}}function we(i,e){if(i&1){let o=W();c(0,"p-button",20),E("onClick",function(n){q(o);let r=f();return Y(r.onDelete(n))}),u()}}function ve(i,e){if(i&1){let o=W();c(0,"p-button",21),E("onClick",function(n){q(o);let r=f();return Y(r.onMessage(n))}),u()}if(i&2){let o=f();B("label","Contact the "+(o.auction.userId&&o.auction.userId===(o.authentication.loggedUser==null?null:o.authentication.loggedUser.id)?"winner":"owner"))}}function be(i,e){i&1&&v(0,"p-button",13)}var Ni=(()=>{let e=class e{constructor(t,n,r,a){this.windowService=t,this.authentication=n,this.auctioneerService=r,this.router=a,this.cardStyle={},this.skipLocationChange=!1,this.showInfoBtn=!1,this.privateView=!1,this.loaded=new yt,this.statuses=g.STATUSES,this.showImagePlaceholder=!1,this.pendingEndTime=null}ngOnInit(){this.loaded.emit(),this.auction.status===g.STATUSES.pending&&(this.pendingEndTime=new Date(this.auction.endTime.getTime()+$t.auctionPendingTime))}onImageError(){this.showImagePlaceholder=!0}onClick(){this.auction.userId&&this.auction.userId===this.authentication.loggedUser?.id&&this.auction.status===g.STATUSES.pending&&!this.router.url.includes("txn")?this.navigateToConclusion():this.navigateToDetails()}onDelete(t){t.stopPropagation(),this.auctioneerService.showAbortDialog(this.auction.id).subscribe()}onMessage(t){t.stopPropagation(),this.router.navigate(["message",this.auction?.id])}navigateToDetails(){this.router.navigate(["",{outlets:{overlay:["auctions",this.auction.id]}}],{skipLocationChange:this.skipLocationChange,queryParamsHandling:"merge"})}navigateToConclusion(){this.router.navigate(["/","txn",this.auction.id,ct.conclude])}};e.\u0275fac=function(n){return new(n||e)(m(Ft),m(J),m(O),m(Et))},e.\u0275cmp=U({type:e,selectors:[["dd24-auction-card"]],inputs:{auction:"auction",cardStyle:"cardStyle",skipLocationChange:"skipLocationChange",showInfoBtn:"showInfoBtn",privateView:"privateView"},outputs:{loaded:"loaded"},standalone:!0,features:[D],decls:27,vars:26,consts:[["tabindex","0",1,"auction-card",3,"click","keyup.enter"],[1,"auction-card-image-container"],["alt","Auction image",1,"auction-card-image",3,"src"],[1,"auction-card-divider"],[1,"auction-card-title-container"],["translate","no",1,"auction-card-title","wk-nowrap"],[1,"auction-card-secondary-line","wk-nowrap"],[1,"auction-card-auction-type",3,"ruleset"],[1,"auction-card-details-container"],[1,"auction-card-sum",3,"innerHTML"],[1,"auction-card-time-left","wk-nowrap"],[1,"auction-card-btns"],["label","Delete","icon","pi pi-trash","severity","danger","outlined","true",1,"auction-card-btn"],["label","View details","icon","pi pi-info-circle","outlined","true",1,"auction-card-btn"],["alt","Auction image",1,"auction-card-image",3,"error","src"],[1,"auction-card-missing-image","pi","pi-image"],[2,"font-weight","var(--font-weight-bolder)",3,"endDate"],[1,"pending-timer"],[1,"pi","pi-clock"],[3,"endDate"],["label","Delete","icon","pi pi-trash","severity","danger","outlined","true",1,"auction-card-btn",3,"onClick"],["icon","pi pi-envelope","outlined","true",1,"auction-card-btn",3,"onClick","label"]],template:function(n,r){if(n&1&&(c(0,"div",0),E("click",function(){return r.onClick()})("keyup.enter",function(){return r.onClick()}),c(1,"div",1),M(2,le,1,1,"img",2)(3,me,1,0),u(),M(4,pe,1,0,"div",3),p(5,"async"),c(6,"div",4)(7,"span",5),l(8),u(),c(9,"span",6),M(10,he,1,1),l(11),u()(),c(12,"dd24-auction-ruleset-link",7),l(13),u(),c(14,"div",8),v(15,"span",9),p(16,"auctionStatusDescription"),p(17,"async"),p(18,"oneCharUpper"),c(19,"span",10),M(20,ye,5,7)(21,Ce,5,1)(22,_e,3,3),u()(),c(23,"div",11),M(24,we,1,0,"p-button",12)(25,ve,1,1)(26,be,1,0,"p-button",13),u()()),n&2){let a;vt(r.cardStyle),K("auction-card-active",r.auction.isOver===!1)("auction-card-pending",r.auction.status===r.statuses.pending),s(2),x(2,r.auction.pictureUrl&&!r.showImagePlaceholder?2:3),s(2),x(4,y(5,18,r.windowService.isMobile$)===!1?4:-1),s(4),R(r.auction.title),s(2),x(10,r.auction.conditions?10:-1),s(),bt(" from ",r.auction.city,", ",r.auction.country," "),s(),B("ruleset",r.auction.ruleset),s(),R(r.auction.ruleset),s(2),B("innerHTML",y(18,24,(a=y(17,22,y(16,20,r.auction)))!==null&&a!==void 0?a:""),Ct),s(5),x(20,r.auction.isOver?r.privateView&&r.auction.userId===(r.authentication.loggedUser==null?null:r.authentication.loggedUser.id)&&r.pendingEndTime?21:22:20),s(4),x(24,r.privateView&&r.auction.isOver===!1&&r.auction.userId&&r.auction.userId===(r.authentication.loggedUser==null?null:r.authentication.loggedUser.id)?24:r.privateView&&r.auction.status===r.statuses.accepted?25:-1),s(2),x(26,r.showInfoBtn?26:-1)}},dependencies:[It,Mt,Nt,Ht,qt,Wt,Zt,Dt,zt],styles:['.auction-card[_ngcontent-%COMP%]{display:grid;grid-template:"image divider title" auto "image divider type" auto "image divider details" auto "image divider btns" minmax(0,1fr)/auto auto 1fr;grid-gap:0;justify-items:stretch;align-items:stretch;justify-content:stretch;align-content:stretch;min-height:var(--card-height);width:100%;border:var(--border);border-radius:var(--border-radius-large);overflow:hidden;cursor:pointer;background-color:var(--component-color)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]{display:grid;grid-template:"type type" auto "image title" auto "image details" auto "btns btns" auto/auto 1fr;grid-gap:0;justify-items:stretch;align-items:stretch;justify-content:stretch;align-content:stretch;align-items:center;border-radius:0;border-right-width:0;border-left-width:0}}.auction-card[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:0;flex-wrap:nowrap;grid-area:image;height:100%;align-self:center;width:var(--card-height);height:var(--card-height);overflow:hidden}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]{height:calc(var(--card-height) / 2);width:calc(var(--card-height) / 2);border-radius:var(--border-radius-medium);border:var(--border);margin-left:1rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-image[_ngcontent-%COMP%]{object-fit:cover;min-width:0;min-height:0;max-width:100%;max-height:100%}.auction-card[_ngcontent-%COMP%]   .auction-card-missing-image[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:0;flex-wrap:nowrap;height:100%;width:100%;font-size:8rem;color:var(--border-color)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-missing-image[_ngcontent-%COMP%]{font-size:3rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-divider[_ngcontent-%COMP%]{grid-area:divider;background-color:var(--border-color);height:100%;width:1px}.auction-card[_ngcontent-%COMP%]   .auction-card-title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:start;gap:0;flex-wrap:nowrap;color:var(--text-color-1);padding:1rem;grid-area:title;overflow:hidden}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-title-container[_ngcontent-%COMP%]{padding:0 1rem;justify-content:center}}.auction-card[_ngcontent-%COMP%]   .auction-card-title[_ngcontent-%COMP%]{font-size:var(--font-size-large);font-weight:var(--font-weight-bolder);line-height:var(--line-height-large)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-title[_ngcontent-%COMP%]{line-height:normal}}.auction-card[_ngcontent-%COMP%]   .auction-card-secondary-line[_ngcontent-%COMP%]{font-size:var(--font-size-medium);color:var(--text-color-3)}.auction-card[_ngcontent-%COMP%]   .auction-card-auction-type[_ngcontent-%COMP%]{grid-area:type;padding:.2rem 1rem}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-auction-type[_ngcontent-%COMP%]{padding:1rem 1rem .2rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:start;gap:.1em;flex-wrap:nowrap;grid-area:details;color:var(--text-color-1);padding:0 1rem;font-size:var(--font-size-medium);font-weight:var(--font-weight-regular)}.auction-card[_ngcontent-%COMP%]   .auction-card-sum[_ngcontent-%COMP%]{font-weight:var(--font-weight-bolder);font-size:var(--font-size-large);line-height:var(--line-height-large)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-sum[_ngcontent-%COMP%]{font-size:var(--font-size-medium);line-height:var(--line-height-medium)}}.auction-card[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%]{font-size:var(--font-size-medium);color:var(--text-color-3)}.auction-card[_ngcontent-%COMP%]   .pending-timer[_ngcontent-%COMP%]{color:var(--danger-color)}.auction-card[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%], .auction-card[_ngcontent-%COMP%]   .auction-card-secondary-line[_ngcontent-%COMP%], .auction-card[_ngcontent-%COMP%]   .auction-card-title[_ngcontent-%COMP%]{-webkit-line-clamp:2}.auction-card[_ngcontent-%COMP%]   .auction-card-btns[_ngcontent-%COMP%]{grid-area:btns;display:flex;flex-direction:row;justify-content:start;align-items:center;gap:1ch;flex-wrap:nowrap;min-height:1rem;padding:.2rem 1rem .4rem}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%], .auction-card[_ngcontent-%COMP%]   .auction-card-secondary-line[_ngcontent-%COMP%]{-webkit-line-clamp:1}}.auction-card-pending[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%]{-webkit-line-clamp:3!important}.auction-card-pending[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]{position:relative}.auction-card-pending[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]:after{content:"OVER";position:absolute;bottom:0;right:0;text-align:center;background-color:var(--accent-color-1);color:var(--text-accent-color);padding:.5rem 0;white-space:nowrap;font-size:var(--font-size-large);font-weight:var(--font-weight-bolder);transform:rotate(-45deg) translateY(120%) translate(28%);display:inline-block;width:100%}@media (max-width: 768px){.auction-card-pending[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]:after{transform:none;font-size:var(--font-size-small);padding:.2rem 0}}[_nghost-%COMP%]     .auction-card-btn .p-button{padding:.5rem 1rem}@media (max-width: 768px){[_nghost-%COMP%]     .auction-card-active .auction-bid-amount{color:var(--accent-color-2);font-weight:var(--font-weight-bolder)}}'],changeDetection:0});let i=e;return i})();export{Q as a,st as b,g as c,Vt as d,Pe as e,Nt as f,Ht as g,qt as h,Kt as i,Wt as j,ct as k,Zt as l,X as m,nt as n,rt as o,Jt as p,O as q,Ni as r};
