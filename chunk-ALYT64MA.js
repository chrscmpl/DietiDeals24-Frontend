import{a as d}from"./chunk-C6O6P6QR.js";import{a as q}from"./chunk-2CJT4ORM.js";import{A as h,B as L,C as F,D as f,F as M,G as N,c as I,s as w}from"./chunk-LCU4DL3S.js";import{C as y,E as c,F as C,Hb as O,Ia as $,Ib as B,Jb as _,K as j,N as P,Qb as x,V as p,X as l,Y as R,_ as m,aa as T,fa as u,gc as E,ka as s,l as g,qa as k,u as o}from"./chunk-BYEFBY3C.js";function A(a){let e={};for(let S of Object.entries(a).filter(t=>!!t[1]))e[S[0]]=S[1];return e}var v=function(a){return a.trending="trending",a.expiration="expiration",a}(v||{});var H=(()=>{let e=class e{constructor(t){this.http=t,this._trendingCategories=null,this._categories=null,this.trendingCategoriesSubject=new g(1),this.categoriesSubject=new g(1),this.categories$=this.categoriesSubject.asObservable().pipe(o(()=>this.categories??{})),this.macroCategories$=this.categoriesSubject.asObservable().pipe(o(()=>this.macroCategories??[])),this.trendingCategories$=this.trendingCategoriesSubject.asObservable().pipe(o(()=>this._trendingCategories??[])),this.refreshCategories()}get trendingCategories(){return this._trendingCategories}get categories(){return this._categories}get macroCategories(){return this.categories?Object.keys(this.categories):null}refreshTrendingCategories(t){this.http.get(`${d.backendHost}/info/trending-categories`).pipe(m(r=>{this._trendingCategories=r,this.trendingCategoriesSubject.next()})).subscribe(t)}refreshCategories(t){this.http.get(`${d.backendHost}/categories`).pipe(o(r=>{let n={};return Object.keys(r).forEach(i=>{n[i]=r[i].sort()}),n}),m(r=>{this._categories=r,this.categoriesSubject.next()})).subscribe(t)}};e.\u0275fac=function(r){return new(r||e)(s(w))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();var U=(()=>{let e=class e{constructor(t,r,n){this.categoriesService=t,this.route=r,this.location=n,this.lastSearchParameters={},this.validatedSearchParameters$=this.route.queryParams.pipe(T(this.categoriesService.categories$.pipe(l({}))),c(()=>this.location.path().startsWith("/auctions")),o(([i,W])=>{let D=this.getValidatedParams(i,W);return this.lastSearchParameters=A(D),this.location.replaceState(this.location.path().split("?")[0],new URLSearchParams(this.lastSearchParameters).toString()),this.lastSearchParameters}),l(this.lastSearchParameters),p(1))}getValidatedParams(t,r){return{keywords:this.validateKeywords(t.keywords),type:this.validateType(t.type),macroCategory:this.validateMacroCategory(t.macroCategory,r),category:this.validateCategory(t.category,r),policy:this.validatePolicy(t.policy)}}validateKeywords(t){return t==this.lastSearchParameters.keywords?t??null:(t=t?.trim(),!t||t.length===0?null:t)}validateType(t){return t==this.lastSearchParameters.type?t??null:!t||!Object.keys(q).includes(t)?null:t}validateMacroCategory(t,r){return t==this.lastSearchParameters.macroCategory?t??null:!t||!Object.keys(r).includes(t)?null:t}validateCategory(t,r){return t==this.lastSearchParameters.category?t??null:!t||!Object.values(r).flat().includes(t)?null:t}validatePolicy(t){return t==this.lastSearchParameters.policy?t??null:!t||!Object.keys(v).includes(t)?null:t}};e.\u0275fac=function(r){return new(r||e)(s(H),s(f),s(I))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();var nt=(()=>{let e=class e{constructor(t,r,n){this.router=t,this.route=r,this.searchService=n,this._routeBeforeRedirection=null,this._routeBeforeTransaction=null,this.navigationEnd$=this.router.events.pipe(c(i=>i instanceof h)),this.isCurrentNavigationSuccessful$=this.router.events.pipe(c(i=>i instanceof L||i instanceof F||i instanceof h),j(1),o(i=>i instanceof h)),this.currentLocation$=this.router.events.pipe(c(i=>i instanceof h),l(null),R(()=>y(this.route.queryParams,this.searchService.validatedSearchParameters$).pipe(C(100))),o(i=>({path:this.getCurrentPath(),query:i})),P(),p(1)),this.currentPath$=this.currentLocation$.pipe(o(i=>i.path)),this.currentQuery$=this.currentLocation$.pipe(o(i=>i.query))}executeIfNavigationSuccessful(t){this.isCurrentNavigationSuccessful$.subscribe(r=>{r&&t()})}executeIfNavigationFailure(t){this.isCurrentNavigationSuccessful$.subscribe(r=>{r||t()})}navigateToRouteBeforeRedirection(){this.navigateToSavedRoute(this._routeBeforeRedirection),this._routeBeforeRedirection=null}navigateRedirectingBack(t){this.routeBeforeRedirection=this.router.url,this.router.navigate([t])}navigateToRouteBeforeTransaction(){this.navigateToSavedRoute(this._routeBeforeTransaction),this._routeBeforeTransaction=null}set routeBeforeRedirection(t){this._routeBeforeRedirection=t}set routeBeforeTransaction(t){this._routeBeforeTransaction=t}get primaryOutletRoute(){return this.router.url.replace(/\(.*?\)/g,"")}navigateToSavedRoute(t){t=t||"/",this.executeIfNavigationFailure(()=>this.router.navigate(["/"])),this.router.navigate([t])}getCurrentPath(){return this.router.parseUrl(this.router.url).root.children.primary?.segments.map(n=>n.path)??[]}};e.\u0275fac=function(r){return new(r||e)(s(M),s(f),s(U))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();var pt=(()=>{let e=class e{constructor(){this.clickEvent=new $}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=k({type:e,selectors:[["dd24-logo"]],outputs:{clickEvent:"clickEvent"},standalone:!0,features:[E],decls:2,vars:0,consts:[["routerLink","/home","tabindex","0",1,"logo-container",3,"click","keypress"],["src","assets/logo.svg","alt","logo",1,"logo"]],template:function(r,n){r&1&&(O(0,"div",0),x("click",function(){return n.clickEvent.emit()})("keypress",function(){return n.clickEvent.emit()}),_(1,"img",1),B())},dependencies:[N],styles:[".logo-container[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{width:100%;height:100%}.logo-container[_ngcontent-%COMP%]{cursor:pointer}"]});let a=e;return a})();export{v as a,H as b,U as c,nt as d,pt as e};
