import{a as P}from"./chunk-VLXUD7GQ.js";import{a as U}from"./chunk-2CJT4ORM.js";import{A as u,B as A,C as q,D as b,F as y,G as H,c as N,s as F}from"./chunk-LCU4DL3S.js";import{C as T,E as l,F as $,Hb as x,Ia as _,Ib as E,Jb as I,K as m,N as p,Qb as M,V as d,X as f,Y as v,_ as S,aa as w,fa as h,gc as L,ka as a,l as C,qa as B,u as n}from"./chunk-BYEFBY3C.js";var j=class{cloneTruthy(r){let c={};for(let t of Object.entries(r).filter(e=>!!e[1]))c[t[0]]=t[1];return c}compareOwnProperties(r,c){let t=Object.getOwnPropertyNames(r),e=Object.getOwnPropertyNames(c);if(t.length!==e.length)return!1;for(let o of t)if(r[o]!==c[o])return!1;return!0}splitArray(r,c){let t=[];return{success:r.filter(o=>c(o)?!0:(t.push(o),!1)),failure:t}}},R=new j;var k=function(s){return s.trending="trending",s.expiration="expiration",s}(k||{});var D=(()=>{let r=class r{constructor(t){this.http=t,this._trendingCategories=null,this._categories=null,this.trendingCategoriesSubject=new C(1),this.categoriesSubject=new C(1),this.categories$=this.categoriesSubject.asObservable().pipe(n(()=>this.categories??{})),this.macroCategories$=this.categoriesSubject.asObservable().pipe(n(()=>this.macroCategories??[])),this.trendingCategories$=this.trendingCategoriesSubject.asObservable().pipe(n(()=>this._trendingCategories??[])),this.refreshCategories()}get trendingCategories(){return this._trendingCategories}get categories(){return this._categories}get macroCategories(){return this.categories?Object.keys(this.categories):null}refreshTrendingCategories(t){this.http.get(`${P.backendHost}/info/trending-categories`).pipe(S(e=>{this._trendingCategories=e,this.trendingCategoriesSubject.next()})).subscribe(t)}refreshCategories(t){this.http.get(`${P.backendHost}/categories`).pipe(n(e=>{let o={};return Object.keys(e).forEach(i=>{o[i]=e[i].sort()}),o}),S(e=>{this._categories=e,this.categoriesSubject.next()})).subscribe(t)}getMacroCategory(t){return this.categories?Object.keys(this.categories).find(e=>t===e||this.categories[e].includes(t))??null:null}isMacroCategory(t){return Object.keys(this.categories??{}).includes(t)}isProduct(t){return this.getMacroCategory(t)?.toLowerCase()==="products"}};r.\u0275fac=function(e){return new(e||r)(a(F))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var K=(()=>{let r=class r{constructor(t,e,o,i){this.categoriesService=t,this.route=e,this.location=o,this.router=i,this.lastSearchParameters={},this.validatedSearchParameters$=this.router.events.pipe(l(g=>g instanceof u&&/^\/auctions(\?.*)?$/.test(g.urlAfterRedirects)),v(()=>this.route.queryParams.pipe(m(1))),p(),w(this.categoriesService.categories$.pipe(f({}))),n(([g,V])=>{let W=this.getValidatedParams(g,V);return this.lastSearchParameters=R.cloneTruthy(W),this.location.replaceState(this.location.path().split("?")[0],new URLSearchParams(this.lastSearchParameters).toString()),this.lastSearchParameters}),f(this.lastSearchParameters),p(R.compareOwnProperties),d(1)),this.validatedSearchParameters$.subscribe()}getValidatedParams(t,e){return{keywords:this.validateKeywords(t.keywords),type:this.validateType(t.type),macroCategory:this.validateMacroCategory(t.macroCategory,e),category:this.validateCategory(t.category,e),policy:this.validatePolicy(t.policy)}}validateKeywords(t){return t==this.lastSearchParameters.keywords?t??null:(t=t?.trim(),!t||t.length===0?null:t)}validateType(t){return t==this.lastSearchParameters.type?t??null:!t||!Object.keys(U).includes(t)?null:t}validateMacroCategory(t,e){return t==this.lastSearchParameters.macroCategory?t??null:!t||!Object.keys(e).includes(t)?null:t}validateCategory(t,e){return t==this.lastSearchParameters.category?t??null:!t||!Object.values(e).flat().includes(t)?null:t}validatePolicy(t){return t==this.lastSearchParameters.policy?t??null:!t||!Object.keys(k).includes(t)?null:t}};r.\u0275fac=function(e){return new(e||r)(a(D),a(b),a(N),a(y))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var ut=(()=>{let r=class r{constructor(t,e,o){this.router=t,this.route=e,this.searchService=o,this._routeBeforeRedirection=null,this._routeBeforeTransaction=null,this.navigationEnd$=this.router.events.pipe(l(i=>i instanceof u)),this.isCurrentNavigationSuccessful$=this.router.events.pipe(l(i=>i instanceof A||i instanceof q||i instanceof u),m(1),n(i=>i instanceof u)),this.currentLocation$=this.router.events.pipe(l(i=>i instanceof u),f(null),v(()=>T(this.route.queryParams,this.searchService.validatedSearchParameters$).pipe($(100))),n(i=>({path:this.getCurrentPath(),query:i})),p(),d(1)),this.currentPath$=this.currentLocation$.pipe(n(i=>i.path)),this.currentQuery$=this.currentLocation$.pipe(n(i=>i.query))}executeIfNavigationSuccessful(t){this.isCurrentNavigationSuccessful$.subscribe(e=>{e&&t()})}executeIfNavigationFailure(t){this.isCurrentNavigationSuccessful$.subscribe(e=>{e||t()})}navigateToRouteBeforeRedirection(){this.navigateToSavedRoute(this._routeBeforeRedirection),this._routeBeforeRedirection=null}navigateRedirectingBack(t){this.routeBeforeRedirection=this.router.url,this.router.navigate([t])}navigateToRouteBeforeTransaction(){this.navigateToSavedRoute(this._routeBeforeTransaction),this._routeBeforeTransaction=null}set routeBeforeRedirection(t){this._routeBeforeRedirection=t}set routeBeforeTransaction(t){this._routeBeforeTransaction=t}get primaryOutletRoute(){return this.router.url.replace(/\(.*?\)/g,"")}navigateToSavedRoute(t){t=t||"/",this.executeIfNavigationFailure(()=>this.router.navigate(["/"])),this.router.navigate([t])}getCurrentPath(){return this.router.parseUrl(this.router.url).root.children.primary?.segments.map(o=>o.path)??[]}};r.\u0275fac=function(e){return new(e||r)(a(y),a(b),a(K))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var mt=(()=>{let r=class r{constructor(){this.clickEvent=new _}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=B({type:r,selectors:[["dd24-logo"]],outputs:{clickEvent:"clickEvent"},standalone:!0,features:[L],decls:2,vars:0,consts:[["routerLink","/home","tabindex","0",1,"logo-container",3,"click","keypress"],["src","assets/logo.svg","alt","logo",1,"logo"]],template:function(e,o){e&1&&(x(0,"div",0),M("click",function(){return o.clickEvent.emit()})("keypress",function(){return o.clickEvent.emit()}),I(1,"img",1),E())},dependencies:[H],styles:[".logo-container[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{width:100%;height:100%}.logo-container[_ngcontent-%COMP%]{cursor:pointer}"]});let s=r;return s})();export{k as a,D as b,R as c,K as d,ut as e,mt as f};
