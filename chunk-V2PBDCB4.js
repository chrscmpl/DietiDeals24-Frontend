import{u as F,v as q,x as D}from"./chunk-AR6ESCK6.js";import{a as A}from"./chunk-2CJT4ORM.js";import{D as u,E as L,F as M,G as b,I as C,J as N,c as v,v as I}from"./chunk-6MRKP2W7.js";import{D as R,F as l,G as P,Jb as E,Ka as O,Kb as T,L as d,Lb as w,O as g,Sb as x,W as f,Z as p,_ as m,aa as y,ca as _,ha as h,ic as B,l as S,ma as o,sa as $,u as a}from"./chunk-I3PUZZLM.js";var j=function(s){return s.trending="trending",s.expiration="expiration",s}(j||{});var U=(()=>{let i=class i{constructor(t){this.http=t,this._trendingCategories=null,this._categories=null,this.trendingCategoriesSubject=new S(1),this.categoriesSubject=new S(1),this.categories$=this.categoriesSubject.asObservable().pipe(a(()=>this.categories??{})),this.macroCategories$=this.categoriesSubject.asObservable().pipe(a(()=>this.macroCategories??[])),this.trendingCategories$=this.trendingCategoriesSubject.asObservable().pipe(a(()=>this._trendingCategories??[])),this.refreshCategories()}get trendingCategories(){return this._trendingCategories}get categories(){return this._categories}get macroCategories(){return this.categories?Object.keys(this.categories):null}refreshTrendingCategories(t){this.http.get("info/trending-categories").pipe(y(e=>{this._trendingCategories=e,this.trendingCategoriesSubject.next()})).subscribe(t)}refreshCategories(t){this.http.get("categories").pipe(a(e=>{let n={};return Object.keys(e).forEach(c=>{n[c]=e[c].sort()}),n}),y(e=>{this._categories=e,this.categoriesSubject.next()})).subscribe(t)}getMacroCategory(t){return this.categories?Object.keys(this.categories).find(e=>t===e||this.categories[e].includes(t))??null:null}isMacroCategory(t){return Object.keys(this.categories??{}).includes(t)}isProduct(t){return this.getMacroCategory(t)?.toLowerCase()==="products"}};i.\u0275fac=function(e){return new(e||i)(o(I))},i.\u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var K=(()=>{let i=class i{constructor(t,e,n,c){this.categoriesService=t,this.route=e,this.location=n,this.router=c,this.lastSearchParameters={},this.validatedSearchParameters$=this.router.events.pipe(l(r=>r instanceof u&&/^\/auctions(\?.*)?$/.test(r.urlAfterRedirects)),m(()=>this.route.queryParams.pipe(d(1))),g(),_(this.categoriesService.categories$.pipe(p({}))),a(([r,V])=>{let W=this.getValidatedParams(r,V);return this.lastSearchParameters=D(W,q),this.location.replaceState(this.location.path().split("?")[0],new URLSearchParams(this.lastSearchParameters).toString()),this.lastSearchParameters}),p(this.lastSearchParameters),g(F),f(1)),this.validatedSearchParameters$.subscribe()}getValidatedParams(t,e){return{keywords:this.validateKeywords(t.keywords),type:this.validateType(t.type),macroCategory:this.validateMacroCategory(t.macroCategory,e),category:this.validateCategory(t.category,e),policy:this.validatePolicy(t.policy)}}validateKeywords(t){return t==this.lastSearchParameters.keywords?t??null:(t=t?.trim(),!t||t.length===0?null:t)}validateType(t){return t==this.lastSearchParameters.type?t??null:!t||!Object.keys(A).includes(t)?null:t}validateMacroCategory(t,e){return t==this.lastSearchParameters.macroCategory?t??null:!t||!Object.keys(e).includes(t)?null:t}validateCategory(t,e){return t==this.lastSearchParameters.category?t??null:!t||!Object.values(e).flat().includes(t)?null:t}validatePolicy(t){return t==this.lastSearchParameters.policy?t??null:!t||!Object.keys(j).includes(t)?null:t}};i.\u0275fac=function(e){return new(e||i)(o(U),o(b),o(v),o(C))},i.\u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var ot=(()=>{let i=class i{constructor(t,e,n,c){this.router=t,this.route=e,this.searchService=n,this.location=c,this._navigationCounter=0,this._backAction=null,this._routeBeforeRedirection=null,this._savedRoute=null,this.currentLocation$=this.router.events.pipe(l(r=>r instanceof u),p(null),m(()=>R(this.route.queryParams,this.searchService.validatedSearchParameters$).pipe(P(100))),a(r=>({path:this.getCurrentPath(),query:r})),g(),f(1)),this.currentPath$=this.currentLocation$.pipe(a(r=>r.path)),this.currentQuery$=this.currentLocation$.pipe(a(r=>r.query)),this.navigationEnd$=this.router.events.pipe(l(r=>r instanceof u)),this.isCurrentNavigationSuccessful$=this.router.events.pipe(l(r=>r instanceof L||r instanceof M||r instanceof u),d(1),a(r=>r instanceof u)),this.navigationEnd$.subscribe(()=>{this._navigationCounter++}),this.location.subscribe(()=>{this._navigationCounter-=2})}set backAction(t){this._backAction=t}back(){this._backAction?this._backAction(this.onBackDefault.bind(this)):this.onBackDefault()}onBackDefault(){this._navigationCounter>1?this.location.back():this.router.navigate(["/"])}executeIfNavigationSuccessful(t){this.isCurrentNavigationSuccessful$.subscribe(e=>{e&&t()})}executeIfNavigationFailure(t){this.isCurrentNavigationSuccessful$.subscribe(e=>{e||t()})}navigateToRouteBeforeRedirection(){this.navigateToRoute(this._routeBeforeRedirection),this._routeBeforeRedirection=null}navigateRedirectingBack(t){this.routeBeforeRedirection=this.router.url,this.router.navigate([t])}navigateToSavedRoute(){this.navigateToRoute(this._savedRoute),this._savedRoute=null}set routeBeforeRedirection(t){this._routeBeforeRedirection=t}set savedRoute(t){this._savedRoute=t}get primaryOutletRoute(){return this.router.url.replace(/\(.*?\)/g,"")}navigateToRoute(t){t=t||"/",this.executeIfNavigationFailure(()=>this.router.navigate(["/"])),this.router.navigate([t])}getCurrentPath(){return this.router.parseUrl(this.router.url).root.children.primary?.segments.map(n=>n.path)??[]}};i.\u0275fac=function(e){return new(e||i)(o(C),o(b),o(K),o(v))},i.\u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var gt=(()=>{let i=class i{constructor(){this.clickEvent=new O}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=$({type:i,selectors:[["dd24-logo"]],outputs:{clickEvent:"clickEvent"},standalone:!0,features:[B],decls:2,vars:0,consts:[["routerLink","/home","tabindex","0",1,"logo-container",3,"click","keypress"],["src","assets/logo.svg","alt","logo",1,"logo"]],template:function(e,n){e&1&&(E(0,"div",0),x("click",function(){return n.clickEvent.emit()})("keypress",function(){return n.clickEvent.emit()}),w(1,"img",1),T())},dependencies:[N],styles:[".logo-container[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{width:100%;height:100%}.logo-container[_ngcontent-%COMP%]{cursor:pointer}"]});let s=i;return s})();export{j as a,U as b,K as c,ot as d,gt as e};
