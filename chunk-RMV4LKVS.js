import{$ as xt,H as Me,I as B,J as M,L as dt,M as pt,N as ut,O as gt,Q as ft,R as ht,S as vt,T as K,U as yt,V as wt,W as _t,X as Ct,Y as bt,Z as H,_ as J,a as ue,b as ge,d as ct,e as mt,y as U,z}from"./chunk-HI7PKNBY.js";import{G as ot,K as G,O as k,Q as pe,R as at,S as $,U as g,X as N,Y as D,_ as v,aa as V,ca as A,da as st,ea as L,fa as lt,g as E,ha as R,ja as j,l as it,m as Pe,u as nt,v as rt,x as I,y as T}from"./chunk-6LNH3PAE.js";import{$a as qe,Aa as b,C as X,Ea as c,Fb as Ye,Ga as Re,Gb as Qe,Ia as je,Ja as S,N as Ie,Oa as a,Pa as s,Pb as $e,Q as Te,Qa as d,Qb as He,R as Ne,Ra as re,S as te,Sa as oe,Sb as Je,Ta as Be,Tb as Xe,U as De,Ua as q,V as _e,Va as y,W as Ve,Wa as h,X as P,Xb as me,Y as ie,a as we,ab as Ge,bb as ae,ca as _,cb as se,da as C,eb as m,fb as le,g as Ee,gb as Ue,ha as Ae,ia as ne,jb as Ce,kb as be,lb as xe,mb as ze,nb as O,ob as f,pa as l,pb as x,pc as de,qa as u,qb as F,qc as Ze,rb as Ke,rc as et,sc as Q,vc as tt,wb as Y,xb as ce,yb as We,za as Le}from"./chunk-ULPZ3EBL.js";var jt=()=>({validation:"required",message:"an email is required"}),Bt=()=>({validation:"email",message:"please enter a valid email"}),Pt=(n,r)=>[n,r],qt=()=>({validation:"required",message:"a password is required"}),Gt=()=>["pattern","minlength","maxlength"],Ut=n=>({validation:n,message:"a password must be at least 8 characters long, and contain at least one lowercase letter, one uppercase letter, and one special character."}),St=(()=>{let r=class r{constructor(e,i,o,p,w){this.authenticationService=e,this.navigation=i,this.formBuilder=o,this.element=p,this.message=w,this.submissionLoading=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:new v(null,{validators:[g.required,g.email],updateOn:"blur"}),password:new v(null,{validators:[g.required,g.minLength(8),g.pattern(G.passwordPattern)],updateOn:"blur"})})}ngAfterViewInit(){setTimeout(()=>{this.patchValueFromNativeElement("email","#email"),this.patchValueFromNativeElement("password","#password")},500)}patchValueFromNativeElement(e,i){let o=this.element.nativeElement.querySelector(i);o?.value&&this.loginForm.get(e)?.patchValue(o.value)}dd24Login(){if(this.loginForm.invalid){M.markAllAsDirty(this.loginForm);return}this.submissionLoading=!0,this.authenticationService.login(this.loginForm.value,{next:this.onLoginSuccess.bind(this),error:this.onLoginError.bind(this)})}googleSignIn(){this.message.add({severity:"info",summary:"Not implemented",detail:"Google sign in is not implemented at this time"})}onLoginSuccess(){this.navigation.navigateToRouteBeforeRedirection()}onLoginError(e){this.submissionLoading=!1,e.error.status>=500?this.displayError("Server error","Please try again later"):e.error.status>=400?this.displayError("Incorrect email or password","Please try again"):e.error.status===0?this.displayError("Network error","Check your connection and try again"):this.displayError("An error occurred","Please try again")}displayError(e,i){this.message.add({severity:"error",summary:e,detail:i})}};r.\u0275fac=function(i){return new(i||r)(u(k),u(K),u(R),u(Ae),u(E))},r.\u0275cmp=P({type:r,selectors:[["dd24-login-page"]],standalone:!0,features:[O],decls:26,vars:17,consts:[[1,"form-card","dd24-auth-form"],["routerLink","../register",1,"registration-link","link"],[1,"google-login"],["severity","secondary",1,"google-login-btn","p-fluid",3,"onClick"],["src","assets/google.svg","alt","google-logo"],["align","center",1,"divider"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"inputs"],[1,"input","email-input"],["for","email"],["controlName","email",3,"errorMessages"],["type","email","pInputText","","formControlName","email","name","email","placeholder","Your email","id","email",1,"p-fluid"],[1,"input","password-input"],["for","password"],["controlName","password",3,"errorMessages"],["type","password","formControlName","password","name","password","toggleMask","true","placeholder","Your password","inputId","password",1,"p-fluid",3,"feedback"],["routerLink","../forgot-password",1,"link","forgot-password"],["label","Login","type","submit",1,"login-submit",3,"loading"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"h1"),m(2,"Log into DietiDeals24"),s(),a(3,"a",1),m(4," you don't have an account? "),s(),a(5,"div",2)(6,"p-button",3),y("onClick",function(){return o.googleSignIn()}),d(7,"img",4),m(8," Continue with Google "),s()(),a(9,"p-divider",5),m(10,"or"),s(),a(11,"form",6),y("ngSubmit",function(){return o.dd24Login()}),a(12,"section",7)(13,"div",8)(14,"label",9),m(15,"Email"),s(),a(16,"dd24-input",10),d(17,"input",11),s()(),a(18,"div",12)(19,"label",13),m(20,"Password"),s(),a(21,"dd24-input",14),d(22,"p-password",15),s()()(),a(23,"a",16),m(24," forgot your password? "),s(),d(25,"p-button",17),s()()),i&2&&(l(11),c("formGroup",o.loginForm),l(5),c("errorMessages",F(7,Pt,f(5,jt),f(6,Bt))),l(5),c("errorMessages",F(14,Pt,f(10,qt),x(12,Ut,f(11,Gt)))),l(),c("feedback",!1),l(3),c("loading",o.submissionLoading))},dependencies:[j,V,$,N,D,A,L,Q,B,z,U,T,I,J,H,ge,ue],styles:[".form-card[_ngcontent-%COMP%]   .google-login[_ngcontent-%COMP%]{margin:1rem 0;width:100%;padding-left:3rem;padding-right:3rem}.form-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:100%}.form-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:0;flex-wrap:nowrap;padding-left:3rem;padding-right:3rem;font-size:var(--font-size-medium);width:100%}.form-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:1em;flex-wrap:nowrap}.form-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:0;flex-wrap:nowrap}.form-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{margin-top:.25rem}.form-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{align-self:center;margin-bottom:1rem;word-wrap:break-word}.form-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-submit[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-divider-content{font-weight:var(--font-weight-bolder);color:var(--text-color-3)}[_nghost-%COMP%]     .google-login-btn button{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1ch;flex-wrap:nowrap;background-color:#fff;color:#000;padding:.5rem;font-weight:500}"]});let n=r;return n})();var Wt=()=>({validation:"required",message:"a name is required"}),ee=n=>[n],Yt=()=>({validation:"required",message:"a surname is required"}),Qt=()=>({validation:"required",message:"a birthday is required"}),$t=()=>({validation:"required",message:"a country is required"}),Ht=()=>({customValidation:"noCountrySelected",message:"You must select a country before selecting a city"}),Jt=()=>({validation:"required",message:"a city is required"}),ye=(n,r)=>[n,r],Xt=()=>({validation:"required",message:"an email is required"}),Zt=()=>({validation:"email",message:"Please enter a valid email"}),ei=()=>({validation:"required",message:"an username is required"}),ti=()=>({validation:"required",message:"a password is required"}),ii=()=>["pattern","minlength","maxlength"],ni=n=>({validation:n,message:"a password must be at least 8 characters long, and contain at least one lowercase letter, one uppercase letter, and one special character."}),ri=()=>({validation:"required",message:"you need to confirm your password"}),oi=()=>({customValidation:"passwordsDoNotMatch",message:"passwords do not match"});function ai(n,r){if(n&1){let t=q();a(0,"div",8)(1,"div",14)(2,"label",15),m(3,"Name*"),s(),a(4,"dd24-input",16),d(5,"input",17),s()(),a(6,"div",14)(7,"label",18),m(8,"Surname*"),s(),a(9,"dd24-input",19),d(10,"input",20),s()(),a(11,"div",14)(12,"label",21),m(13,"Birthday*"),s(),a(14,"dd24-input",22),d(15,"p-calendar",23),s()(),a(16,"div",14)(17,"label",24),m(18,"Country*"),s(),a(19,"dd24-input",25)(20,"p-autoComplete",26),y("completeMethod",function(i){_(t);let o=h();return C(o.completeCountries(i))}),s()()(),a(21,"div",14)(22,"label",27),m(23,"City*"),s(),a(24,"dd24-input",28)(25,"p-autoComplete",29),y("completeMethod",function(i){_(t);let o=h();return C(o.completeCities(i))}),s()()()()}if(n&2){let t=h();l(4),c("errorMessages",x(18,ee,f(17,Wt))),l(),c("pKeyFilter",t.environment.alphaAndWhiteSpacePattern),l(4),c("errorMessages",x(21,ee,f(20,Yt))),l(),c("pKeyFilter",t.environment.alphaAndWhiteSpacePattern),l(4),c("errorMessages",x(24,ee,f(23,Qt))),l(),c("showIcon",!0)("minDate",t.minBirthdayDate)("maxDate",t.maxBirthdayDate)("defaultDate",t.defaultBirthdayDate),l(4),c("errorMessages",x(27,ee,f(26,$t))),l(),c("suggestions",t.filteredCountries)("pKeyFilter",t.environment.alphaAndWhiteSpacePattern),l(2),Re("p-disabled",t.registrationForm.controls.userData.controls.city.disabled),l(2),c("errorMessages",F(31,ye,f(29,Ht),f(30,Jt))),l(),c("suggestions",t.filteredCities)("pKeyFilter",t.environment.alphaAndWhiteSpacePattern)}}function si(n,r){if(n&1&&(a(0,"div",9)(1,"div",14)(2,"label",30),m(3,"Email*"),s(),a(4,"dd24-input",31),d(5,"input",32),s()(),a(6,"div",14)(7,"label",33),m(8,"Username*"),s(),a(9,"dd24-input",34),d(10,"input",35),s()(),a(11,"div",14)(12,"label",36),m(13,"Password*"),s(),a(14,"dd24-input",37),d(15,"p-password",38),s()(),a(16,"div",14)(17,"label",39),m(18,"Confirm password*"),s(),a(19,"dd24-input",40),d(20,"p-password",41),s()()()),n&2){let t=h();l(4),c("errorMessages",F(11,ye,f(9,Xt),f(10,Zt))),l(5),c("errorMessages",x(15,ee,f(14,ei))),l(),c("maxlength",t.environment.usernameMaxLength),l(4),c("errorMessages",F(21,ye,f(17,ti),x(19,ni,f(18,ii)))),l(),c("feedback",!0)("strongRegex",t.environment.passwordStrongPattern)("mediumRegex",t.environment.passwordMediumPattern),l(4),c("errorMessages",F(26,ye,f(24,ri),f(25,oi))),l(),c("feedback",!1)}}function li(n,r){if(n&1){let t=q();a(0,"div",10)(1,"div",42),y("click",function(i){_(t);let o=h();return C(o.setDialogVisibility(i))})("keypress",function(i){_(t);let o=h();return C(o.setDialogVisibility(i))}),d(2,"div",43),a(3,"div",44)(4,"span"),m(5,"Terms of Service"),s(),d(6,"i",45),s(),a(7,"span"),m(8),s()(),a(9,"div",46),d(10,"p-checkbox",47),a(11,"label",48),m(12,"I have read and accept the terms of the above terms of service"),s()()()}if(n&2){let t=h();l(8),le(t.tos)}}function ci(n,r){if(n&1&&(a(0,"span",11),m(1),s()),n&2){let t=h();l(),le(t.error)}}var Ft=(()=>{let r=class r{get environment(){return G}constructor(e,i,o,p,w,Dt,Vt,At,Lt){this.formBuilder=e,this.locationsService=i,this.router=o,this.authentication=p,this.message=w,this.assets=Dt,this.navigation=Vt,this.windowService=At,this.route=Lt,this.subscriptions=[],this.next$=new Ee,this.activeStep=0,this.error="",this.countries=[],this.filteredCountries=[],this.cities=[],this.filteredCities=[],this.minBirthdayDate=new Date(1900,0,1),this.maxBirthdayDate=new Date,this.defaultBirthdayDate=new Date(2e3,0,1),this.privacyPolicyDialogVisible=!1,this.tos="",this.onNextuserData=()=>this.registrationForm.get("userData")?.valid?!0:(M.markAllAsDirty(this.registrationForm.get("userData")),!1),this.onNextCredentials=()=>this.registrationForm.get("credentials")?.valid?!0:(M.markAllAsDirty(this.registrationForm.get("credentials")),!1),this.steps=[{title:"Your data",nextCallback:this.onNextuserData.bind(this)},{title:"Your credentials",nextCallback:this.onNextCredentials.bind(this)},{title:"Privacy policy"}],this.submissionLoading=!1}ngOnInit(){this.initForm(),this.maxBirthdayDate.setFullYear(this.maxBirthdayDate.getFullYear()-18),this.route.data.pipe(X(1)).subscribe(e=>{this.countries=e.countries}),this.assets.getPlainText("tos.txt").pipe(X(1)).subscribe(e=>{this.tos=e}),this.handleCityControl(),this.subscriptions.push(this.windowService.isMobile$.subscribe(e=>{this.navigation.backAction=e?this.onBack.bind(this):null})),this.subscriptions.push(this.next$.pipe(Ie(100)).subscribe(()=>{this.stepper.nextStep()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.navigation.backAction=null,this.next$.complete()}initForm(){this.registrationForm=this.formBuilder.group({userData:this.formBuilder.group({name:new v(null,{validators:[g.required],updateOn:"blur"}),surname:new v(null,{validators:[g.required],updateOn:"blur"}),birthday:new v(null,{validators:[g.required]}),country:new v(null,{validators:g.required}),city:new v(null,{validators:g.required})}),credentials:this.formBuilder.group({email:new v(null,{validators:[g.required,g.email],updateOn:"blur"}),username:new v(null,{validators:[g.required],updateOn:"blur"}),password:new v(null,{validators:[g.required,g.minLength(8),g.pattern(G.passwordPattern)],updateOn:"blur"}),confirmPassword:new v(null,{validators:[g.required,this.validateConfirmPassword.bind(this)],updateOn:"blur"})}),privacyPolicy:this.formBuilder.group({accept:new v(!1,{nonNullable:!0,validators:g.requiredTrue})})}),this.registrationForm.controls.userData.controls.city.disable()}handleCityControl(){this.registrationForm.controls.userData.controls.country.valueChanges.subscribe(e=>{let i=this.registrationForm.controls.userData.controls.city;i.setValue(null),i.markAsUntouched(),i.markAsPristine(),e?(i.enable(),this.getCities()):i.disable()})}next(){this.next$.next()}onBack(e){this.activeStep>0?this.stepper.prevStep():e()}onSubmit(){if(this.activeStep!==2){this.next();return}this.onRegister()}googleSignIn(){this.message.add({severity:"info",summary:"Not implemented",detail:"Google sign in is not implemented at this time"})}onRegister(){if(M.forceValidation(this.registrationForm.controls.credentials.controls.confirmPassword),!this.registrationForm.valid){this.onInvalidForm();return}this.submissionLoading=!0,this.error="";let e=ot(we(we({},this.registrationForm.value.userData),this.registrationForm.value.credentials),["confirmPassword"]);this.authentication.register(e,{next:this.onRegisterSuccess.bind(this),error:this.onRegisterError.bind(this)})}onInvalidForm(){M.markAllAsDirty(this.registrationForm),this.registrationForm.get("privacyPolicy")?.invalid&&(this.error="You must accept the privacy policy to continue")}onRegisterSuccess(){this.authentication.emailToVerify=this.registrationForm.get("credentials")?.get("email")?.value??null,this.router.navigate(["auth/verify-email"])}onRegisterError(e){this.submissionLoading=!1,e.error.status>=500?this.showErrorToast("Server error","Please try again later."):e.error.status===409?this.showErrorToast("Conflict","Email or username already in use."):e.error.status>=400?this.showErrorToast("Invalid data","Please check your data and try again."):e.error.status===0?this.showErrorToast("Network error","Check your connection and try again"):this.showErrorToast("An error occurred","Please try again later."),console.error(e.error)}onKeyPressed(e){e.key==="Enter"&&this.onSubmit()}getCities(){let e=this.registrationForm.controls.userData.controls.country;e.valid&&e.value&&this.locationsService.getCities(e.value).subscribe(i=>{this.cities=i})}completeCountries(e){this.filteredCountries=this.countries.filter(i=>i.name.toLowerCase().includes(e.query.toLowerCase()))??[]}completeCities(e){this.filteredCities=this.cities.filter(i=>i.toLowerCase().includes(e.query.toLowerCase()))}setDialogVisibility(e){(e instanceof MouseEvent||e instanceof KeyboardEvent&&e.key==="Enter")&&(this.privacyPolicyDialogVisible=!0)}validateConfirmPassword(e){let i=this.registrationForm?.get("credentials")?.get("password");return e.value===i?.value?{}:{passwordsDoNotMatch:!0}}showErrorToast(e,i){this.message.add({severity:"error",summary:e,detail:i})}};r.\u0275fac=function(i){return new(i||r)(u(R),u(vt),u(et),u(k),u(E),u(bt),u(K),u(pe),u(de))},r.\u0275cmp=P({type:r,selectors:[["dd24-registration-page"]],viewQuery:function(i,o){if(i&1&&Ge(Me,5),i&2){let p;ae(p=se())&&(o.stepper=p.first)}},standalone:!0,features:[O],decls:21,vars:11,consts:[[1,"form-card","dd24-auth-form"],["routerLink","../login",1,"login-link","link"],[1,"google-registration"],["severity","secondary",1,"google-registration-btn","p-fluid",3,"onClick"],["src","assets/google.svg","alt","google-logo"],["align","center",1,"divider"],[3,"activeStepChange","steps","activeStep"],["tabindex","0",1,"registration-form",3,"ngSubmit","keypress","formGroup"],["formGroupName","userData",1,"inner-form"],["formGroupName","credentials",1,"inner-form"],["formGroupName","privacyPolicy",1,"inner-form"],[1,"error"],["type","submit",1,"next-btn",3,"label","loading"],["header","Terms of Service","resizable","false","draggable","false","modal","true","dismissableMask","true",1,"privacy-policy-dialog","custom-dialog",3,"visibleChange","visible"],[1,"input"],["for","name"],["controlName","name",3,"errorMessages"],["type","text","pInputText","","formControlName","name","name","name","placeholder","Your name","id","name",1,"p-fluid",3,"pKeyFilter"],["for","surname"],["controlName","surname",3,"errorMessages"],["type","text","pInputText","","formControlName","surname","name","surname","placeholder","Your surname","id","surname",1,"p-fluid",3,"pKeyFilter"],["for","birthday"],["controlName","birthday",3,"errorMessages"],["formControlName","birthday","name","birthday","iconDisplay","input","placeholder","dd/mm/yyyy","dateFormat","dd/mm/yy","inputId","birthday",1,"p-fluid",3,"showIcon","minDate","maxDate","defaultDate"],["for","country"],["controlName","country",3,"errorMessages"],["formControlName","country","name","country","placeholder","The country you live in","emptyMessage","No countries found","optionLabel","name","optionValue","code","forceSelection","true","minLength","2","inputId","country",1,"p-fluid",3,"completeMethod","suggestions","pKeyFilter"],["for","city"],["controlName","city",3,"errorMessages"],["formControlName","city","name","city","placeholder","The city you live in","emptyMessage","No cities found","forceSelection","true","inputId","city","minLength","2",1,"p-fluid",3,"completeMethod","suggestions","pKeyFilter"],["for","email"],["controlName","email",3,"errorMessages"],["type","email","pInputText","","formControlName","email","name","email","placeholder","Your email","id","email","autocomplete","email",1,"p-fluid"],["for","username"],["controlName","username",3,"errorMessages"],["type","text","pInputText","","formControlName","username","name","username","placeholder","An unique username","id","username","pKeyFilter","alphanum","autocomplete","off",1,"p-fluid",3,"maxlength"],["for","password"],["controlName","password",3,"errorMessages"],["type","password","formControlName","password","name","password","toggleMask","true","placeholder","A strong password","inputId","password","autocomplete","new-password",1,"p-fluid",3,"feedback","strongRegex","mediumRegex"],["for","confirm-password"],["controlName","confirmPassword",3,"errorMessages"],["type","password","formControlName","confirmPassword","name","confirm-password","toggleMask","true","placeholder","The same as above","inputId","confirm-password",1,"p-fluid",3,"feedback"],["tabindex","0",1,"privacy-policy-preview",3,"click","keypress"],[1,"privacy-policy-preview-mask"],[1,"privacy-policy-preview-top"],[1,"pi","pi-arrow-right"],[1,"privacy-policy-checkbox-container"],["formControlName","accept","inputId","accept","binary","true",1,"privacy-policy-checkbox"],["for","accept"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"h1"),m(2,"Sign up to DietiDeals24"),s(),a(3,"a",1),m(4," already have an account? "),s(),a(5,"div",2)(6,"p-button",3),y("onClick",function(){return o.googleSignIn()}),d(7,"img",4),m(8," Continue with Google "),s()(),a(9,"p-divider",5),m(10,"or"),s(),a(11,"dd24-stepper",6),xe("activeStepChange",function(w){return be(o.activeStep,w)||(o.activeStep=w),w}),s(),a(12,"form",7),y("ngSubmit",function(){return o.onSubmit()})("keypress",function(w){return o.onKeyPressed(w)}),b(13,ai,26,34,"div",8)(14,si,21,29,"div",9)(15,li,13,1,"div",10)(16,ci,2,1,"span",11),d(17,"p-button",12),s(),a(18,"p-dialog",13),xe("visibleChange",function(w){return be(o.privacyPolicyDialogVisible,w)||(o.privacyPolicyDialogVisible=w),w}),a(19,"span"),m(20),s()()()),i&2&&(l(11),c("steps",o.steps),Ce("activeStep",o.activeStep),l(),c("formGroup",o.registrationForm),l(),S(13,o.activeStep===0?13:-1),l(),S(14,o.activeStep===1?14:-1),l(),S(15,o.activeStep===2?15:-1),l(),S(16,o.error?16:-1),l(),c("label",o.activeStep!==2?"Next":"Register")("loading",o.submissionLoading),l(),Ce("visible",o.privacyPolicyDialogVisible),l(2),le(o.tos))},dependencies:[Me,T,I,z,U,B,j,V,$,N,D,lt,A,L,st,Q,gt,ut,ge,ue,pt,dt,J,H,wt,yt,mt,ct,ht,ft],styles:[".form-card[_ngcontent-%COMP%]{color:var(--text-color-1)}.form-card[_ngcontent-%COMP%]   .google-registration[_ngcontent-%COMP%]{margin:1rem 0;width:100%;padding-left:3rem;padding-right:3rem}.form-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:100%}.form-card[_ngcontent-%COMP%]   .registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch;gap:0;flex-wrap:nowrap;padding-left:3rem;padding-right:3rem;width:100%;gap:1rem;font-size:var(--font-size-medium);font-weight:var(--font-weight-normal)}.form-card[_ngcontent-%COMP%]   .registration-form[_ngcontent-%COMP%]   .inner-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch;gap:1em;flex-wrap:nowrap}.form-card[_ngcontent-%COMP%]   .inner-form[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.form-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .form-card[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{align-self:center;word-wrap:break-word}.form-card[_ngcontent-%COMP%]   .privacy-policy-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch;gap:0;flex-wrap:nowrap;border-radius:var(--border-radius-medium);border:var(--border);padding:.5em;font-size:var(--font-size-medium);height:6em;overflow:hidden;color:var(--text-color-2);position:relative;cursor:pointer}.form-card[_ngcontent-%COMP%]   .privacy-policy-preview[_ngcontent-%COMP%]   .privacy-policy-preview-mask[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:70%;background:linear-gradient(rgba(255,255,255,0),var(--component-color) 120%)}.form-card[_ngcontent-%COMP%]   .privacy-policy-preview[_ngcontent-%COMP%]   .privacy-policy-preview-top[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:0;flex-wrap:nowrap}.form-card[_ngcontent-%COMP%]   .privacy-policy-preview[_ngcontent-%COMP%]   .privacy-policy-preview-top[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:var(--font-weight-bolder)}.form-card[_ngcontent-%COMP%]   .privacy-policy-checkbox[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1ch}.form-card[_ngcontent-%COMP%]   .privacy-policy-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{vertical-align:middle;cursor:pointer}[_nghost-%COMP%]     .p-divider{margin-bottom:0}[_nghost-%COMP%]     .p-divider-content{font-weight:var(--font-weight-bolder);color:var(--text-color-3)}[_nghost-%COMP%]     .google-registration-btn button{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1ch;flex-wrap:nowrap;background-color:#fff;color:#000;padding:.5rem;font-weight:500}"]});let n=r;return n})();var mi=()=>({validation:"required",message:"an email or username is required"}),di=n=>[n];function pi(n,r){if(n&1){let t=q();a(0,"p"),m(1," We'll send you an email to reset your password and get you back to making deals "),s(),a(2,"form",1),y("ngSubmit",function(){_(t);let i=h();return C(i.onSubmit())}),a(3,"section",2)(4,"div",3)(5,"label",4),m(6,"Enter your email address or username"),s(),a(7,"dd24-input",5),d(8,"input",6),s()()(),d(9,"p-button",7),s()}if(n&2){let t=h();l(2),c("formGroup",t.forgotPasswordForm),l(5),c("errorMessages",x(4,di,f(3,mi))),l(2),c("loading",t.submissionLoading)}}function ui(n,r){n&1&&(a(0,"p"),m(1," We have sent an email to the email address associated to the account. Once you have reset your password, log in and get back to what you were doing by clicking the button below "),s(),d(2,"p-button",8))}var Ot=(()=>{let r=class r{constructor(e,i,o){this.formBuilder=e,this.authentication=i,this.message=o,this.submissionLoading=!1,this.submittedSuccessfully=!1}ngOnInit(){this.forgotPasswordForm=this.formBuilder.group({emailOrUsername:new v(null,{updateOn:"blur",validators:[g.required]})})}onSubmit(){if(this.forgotPasswordForm.invalid){M.markAllAsDirty(this.forgotPasswordForm);return}this.submissionLoading=!0,this.authentication.requestForgottenPasswordReset(this.forgotPasswordForm.value.emailOrUsername.includes("@")?{email:this.forgotPasswordForm.value.emailOrUsername}:{username:this.forgotPasswordForm.value.emailOrUsername}).subscribe({next:this.onSubmissionSuccess.bind(this),error:this.onSubmissionError.bind(this)})}onSubmissionSuccess(){this.submissionLoading=!1,this.submittedSuccessfully=!0}onSubmissionError(e){this.submissionLoading=!1,e.error.status>=500?this.displayError("Server error","Please try again later"):e.error.status>=400?this.displayError("Incorrect email or username","Please try again"):e.error.status===0?this.displayError("Network error","Check your connection and try again"):this.displayError("An error occurred","Please try again")}displayError(e,i){this.message.add({severity:"error",summary:e,detail:i})}};r.\u0275fac=function(i){return new(i||r)(u(R),u(k),u(E))},r.\u0275cmp=P({type:r,selectors:[["dd24-forgot-password-page"]],standalone:!0,features:[O],decls:5,vars:1,consts:[[1,"form-card","dd24-auth-form"],[1,"forgot-password-form",3,"ngSubmit","formGroup"],[1,"inputs"],[1,"input"],["for","email-username"],["controlName","emailOrUsername",3,"errorMessages"],["type","text","pInputText","","formControlName","emailOrUsername","name","email-username","id","email-username",1,"p-fluid"],["label","Send","type","submit",1,"forgot-submit",3,"loading"],["label","Login","routerLink","../login",1,"login-btn"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"h1"),m(2,"Reset your password"),s(),b(3,pi,10,6)(4,ui,3,0),s()),i&2&&(l(3),S(3,o.submittedSuccessfully?4:3))},dependencies:[B,T,I,j,V,$,N,D,A,L,z,U,Q],styles:[".form-card[_ngcontent-%COMP%]{gap:1rem}.form-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.forgot-password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:2rem;flex-wrap:nowrap;padding-left:3rem;padding-right:3rem;font-size:var(--font-size-medium);width:100%}.forgot-password-form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:1em;flex-wrap:nowrap}.forgot-password-form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:0;flex-wrap:nowrap}.login-btn[_ngcontent-%COMP%]{align-self:stretch}"]});let n=r;return n})();function gi(n,r){n&1&&d(0,"dd24-logo",4)}function fi(n,r){n&1&&(a(0,"div",4),d(1,"dd24-logo"),s())}function hi(n,r){n&1&&d(0,"div",5)}function vi(n,r){n&1&&d(0,"div",5)}var kt=(()=>{let r=class r{constructor(e,i){this.navigation=e,this.windowService=i}goBack(){this.navigation.back()}};r.\u0275fac=function(i){return new(i||r)(u(K),u(pe))},r.\u0275cmp=P({type:r,selectors:[["dd24-authentication-page"]],standalone:!0,features:[O],decls:13,vars:9,consts:[[1,"authentication-page"],[1,"banner"],[1,"page-back-button",3,"click"],["id","arrow-back-button-icon",1,"pi","pi-arrow-left"],[1,"logo"],[1,"spacer"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),y("click",function(){return o.goBack()}),d(3,"i",3),s(),b(4,gi,1,0,"dd24-logo",4),Y(5,"async"),s(),a(6,"main"),b(7,fi,2,0,"div",4),Y(8,"async"),b(9,hi,1,0),d(10,"router-outlet"),b(11,vi,1,0,"div",5),Y(12,"async"),s()()),i&2&&(l(4),S(4,ce(5,3,o.windowService.isMobile$)===!1?4:-1),l(3),S(7,ce(8,5,o.windowService.isMobile$)?7:9),l(4),S(11,ce(12,7,o.windowService.isMobile$)===!1?11:-1))},dependencies:[_t,Xe,Ze],styles:['.authentication-page[_ngcontent-%COMP%]{height:100dvh;background-color:var(--background-color);width:100%;display:grid;grid-template:"banner main" 1fr/52% 48%;grid-gap:0;justify-items:stretch;align-items:stretch;justify-content:stretch;align-content:stretch}@media (max-width: 768px){.authentication-page[_ngcontent-%COMP%]{grid-template:"main" 1fr/1fr;height:auto;min-height:100%;background-color:var(--component-color)}}.authentication-page[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{grid-area:banner;background-color:var(--side-color);position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:0;flex-wrap:nowrap;border-right:2px solid var(--border-color-side)}@media (max-width: 768px){.authentication-page[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{display:none}}.authentication-page[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .page-back-button[_ngcontent-%COMP%]{--size: 4rem;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:0;flex-wrap:nowrap;position:absolute;top:0;left:0;background-color:transparent;border:none;color:var(--text-side-color);overflow:hidden;padding:calc(var(--size) / 4);cursor:pointer}.authentication-page[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .page-back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:var(--size);width:var(--size);font-size:var(--size)}@media (max-width: 768px){.authentication-page[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .page-back-button[_ngcontent-%COMP%]{position:static;--size: 2rem}}.authentication-page[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:70%}.authentication-page[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{grid-area:main;display:flex;flex-direction:column;justify-content:start;align-items:center;gap:1rem;flex-wrap:nowrap;padding-top:2rem;padding-bottom:2rem;overflow-y:auto;height:100%}.authentication-page[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{align-self:center;display:block;width:75%}.authentication-page[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}@media (max-width: 768px){.authentication-page[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:auto;overflow:hidden;align-items:stretch;justify-content:center;background-color:var(--background-color)}}']});let n=r;return n})();var yi=(n,r,t)=>({$implicit:n,events:r,index:t});function wi(n,r){if(n&1){let t=q();re(0),a(1,"input",2),y("input",function(i){_(t);let o=h().$implicit,p=h();return C(p.onInput(i,o-1))})("focus",function(i){_(t);let o=h(2);return C(o.onInputFocus(i))})("blur",function(i){_(t);let o=h(2);return C(o.onInputBlur(i))})("paste",function(i){_(t);let o=h(2);return C(o.onPaste(i))})("keydown",function(i){_(t);let o=h(2);return C(o.onKeyDown(i))}),s(),oe()}if(n&2){let t=h().$implicit,e=h();l(),c("value",e.getModelValue(t))("maxLength",1)("type",e.inputType)("inputmode",e.inputMode)("variant",e.variant)("readonly",e.readonly)("disabled",e.disabled)("invalid",e.invalid)("tabindex",e.tabindex)("unstyled",e.unstyled)("autofocus",e.getAutofocus(t))}}function _i(n,r){n&1&&Be(0)}function Ci(n,r){if(n&1&&(re(0),b(1,_i,1,0,"ng-container",3),oe()),n&2){let t=h().$implicit,e=h();l(),c("ngTemplateOutlet",e.inputTemplate)("ngTemplateOutletContext",Ke(2,yi,e.getToken(t-1),e.getTemplateEvents(t-1),t))}}function bi(n,r){if(n&1&&(re(0),b(1,wi,2,11,"ng-container",1)(2,Ci,2,6,"ng-container",1),oe()),n&2){let t=h();l(),c("ngIf",!t.inputTemplate),l(),c("ngIf",t.inputTemplate)}}var xi={provide:at,useExisting:Te(()=>Oe),multi:!0},Oe=(()=>{class n{cd;invalid=!1;disabled=!1;readonly=!1;variant="outlined";tabindex=null;length=4;mask=!1;integerOnly=!1;autofocus;onChange=new ne;onFocus=new ne;onBlur=new ne;templates;inputTemplate;tokens=[];onModelChange=()=>{};onModelTouched=()=>{};value;get inputMode(){return this.integerOnly?"numeric":"text"}get inputType(){return this.mask?"password":"text"}constructor(t){this.cd=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"input":this.inputTemplate=t.template;break;default:this.inputTemplate=t.template;break}})}getToken(t){return this.tokens[t]}getTemplateEvents(t){return{input:e=>this.onInput(e,t),keydown:e=>this.onKeyDown(e),focus:e=>this.onFocus.emit(e),blur:e=>this.onBlur.emit(e),paste:e=>this.onPaste(e)}}onInput(t,e){this.tokens[e]=t.target.value,this.updateModel(t),t.inputType==="deleteContentBackward"?this.moveToPrev(t):(t.inputType==="insertText"||t.inputType==="deleteContentForward")&&this.moveToNext(t)}updateModel(t){let e=this.tokens.join("");this.onModelChange(e),this.onChange.emit({originalEvent:t,value:e})}writeValue(t){t?Array.isArray(t)&&t.length>0?this.value=t.slice(0,this.length):this.value=t.toString().split("").slice(0,this.length):this.value=t,this.updateTokens(),this.cd.markForCheck()}updateTokens(){this.value!==null&&this.value!==void 0?Array.isArray(this.value)?this.tokens=[...this.value]:this.tokens=this.value.toString().split(""):this.tokens=[]}getModelValue(t){return this.tokens[t-1]||""}getAutofocus(t){return t===1?this.autofocus:!1}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}moveToPrev(t){let e=this.findPrevInput(t.target);e&&(e.focus(),e.select())}moveToNext(t){let e=this.findNextInput(t.target);e&&(e.focus(),e.select())}findNextInput(t){let e=t.nextElementSibling;if(e)return e.nodeName==="INPUT"?e:this.findNextInput(e)}findPrevInput(t){let e=t.previousElementSibling;if(e)return e.nodeName==="INPUT"?e:this.findPrevInput(e)}onInputFocus(t){t.target.select(),this.onFocus.emit(t)}onInputBlur(t){this.onBlur.emit(t)}onKeyDown(t){switch(t.code){case"ArrowLeft":this.moveToPrev(t),t.preventDefault();break;case"ArrowUp":case"ArrowDown":t.preventDefault();break;case"Backspace":t.target.value.length===0&&(this.moveToPrev(t),t.preventDefault());break;case"ArrowRight":this.moveToNext(t),t.preventDefault();break;default:(this.integerOnly&&!((t.code.startsWith("Digit")||t.code.startsWith("Numpad"))&&Number(t.key)>=0&&Number(t.key)<=9)||this.tokens.join("").length>=this.length&&t.code!=="Delete")&&t.preventDefault();break}}onPaste(t){let e=t.clipboardData.getData("text");if(e.length){let i=e.substring(0,this.length+1);(!this.integerOnly||!isNaN(i))&&(this.tokens=i.split(""),this.updateModel(t))}t.preventDefault()}getRange(t){return Array.from({length:t},(e,i)=>i+1)}trackByFn(t){return t}static \u0275fac=function(e){return new(e||n)(u(Ye))};static \u0275cmp=P({type:n,selectors:[["p-inputOtp"]],contentQueries:function(e,i,o){if(e&1&&qe(o,it,4),e&2){let p;ae(p=se())&&(i.templates=p)}},hostAttrs:[1,"p-inputotp","p-component"],inputs:{invalid:"invalid",disabled:"disabled",readonly:"readonly",variant:"variant",tabindex:"tabindex",length:"length",mask:"mask",integerOnly:"integerOnly",autofocus:[Ve.HasDecoratorInputTransform,"autofocus","autofocus",Qe]},outputs:{onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur"},features:[ze([xi]),Le],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["type","text","pInputText","","pAutoFocus","",1,"p-inputotp-input",3,"input","focus","blur","paste","keydown","value","maxLength","type","inputmode","variant","readonly","disabled","invalid","tabindex","unstyled","autofocus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){e&1&&b(0,bi,3,2,"ng-container",0),e&2&&c("ngForOf",i.getRange(i.length))("ngForTrackBy",i.trackByFn)},dependencies:[$e,He,Je,U,nt],encapsulation:2,changeDetection:0})}return n})(),Et=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=ie({type:n});static \u0275inj=te({imports:[me,Pe,z,rt,Pe]})}return n})();var Mi=()=>({validation:"required",message:"a code is required"}),Si=()=>["minlength","maxlength"],Fi=n=>({validation:n,message:"the code must be 5 digits long"}),Oi=(n,r)=>[n,r],It=(()=>{let r=class r{constructor(e,i,o,p){this.authentication=e,this.formBuilder=i,this.navigation=o,this.message=p,this.showEmail=!1,this.submissionLoading=!1}ngOnInit(){if(!this.authentication.emailToVerify){this.navigation.back();return}this.verificationForm=this.formBuilder.group({code:new v("",{validators:[g.required,g.minLength(5),g.maxLength(5)],updateOn:"submit"}),email:new v(this.authentication.emailToVerify,[g.required])})}toggleEmailVisibility(){this.showEmail=!this.showEmail}onSubmit(){if(this.verificationForm.invalid){this.onInvalidForm();return}this.submissionLoading=!0,this.authentication.verifyEmail(this.verificationForm.value,{next:this.onVerificationSuccess.bind(this),error:this.onVerificationError.bind(this)})}onKeyPressed(e){e.key==="Enter"&&this.onSubmit()}onInvalidForm(){M.markAllAsDirty(this.verificationForm)}onVerificationSuccess(){this.navigation.navigateToRouteBeforeRedirection()}onVerificationError(e){this.submissionLoading=!1,e.error.status>=500?this.displayError("Server error","Please try again later."):e.error.status>=400?this.displayError("Invalid code","Please check your code and try again."):e.error.status===0?this.displayError("Network error","Check your connection and try again"):this.displayError("An error occurred","Please try again later")}displayError(e,i){this.message.add({severity:"error",summary:e,detail:i})}};r.\u0275fac=function(i){return new(i||r)(u(k),u(R),u(K),u(E))},r.\u0275cmp=P({type:r,selectors:[["dd24-verify-email-page"]],standalone:!0,features:[O],decls:18,vars:18,consts:[[1,"form-card","dd24-auth-form"],["tabindex","0",1,"verification-form",3,"ngSubmit","keypress","formGroup"],[1,"input","code-input"],["controlName","code",3,"errorMessages"],["formControlName","code",3,"integerOnly","length"],[1,"address-box-container"],[1,"address-box"],[1,"email-mask-toggle",3,"click"],["label","verify","type","submit",1,"submit-btn",3,"loading"]],template:function(i,o){if(i&1&&(a(0,"div",0)(1,"h1"),m(2,"Verify your email address"),s(),a(3,"form",1),y("ngSubmit",function(){return o.onSubmit()})("keypress",function(w){return o.onKeyPressed(w)}),a(4,"p"),m(5," We have sent an email to the selected address containing a code for verification. "),s(),a(6,"div",2)(7,"dd24-input",3),d(8,"p-inputOtp",4),s()(),a(9,"div",5)(10,"p"),m(11,"The address we sent the email to is:"),s(),a(12,"span",6),m(13),Y(14,"masked"),a(15,"button",7),y("click",function(){return o.toggleEmailVisibility()}),d(16,"i"),s()()(),d(17,"p-button",8),s()()),i&2){let p;l(3),c("formGroup",o.verificationForm),l(4),c("errorMessages",F(15,Oi,f(11,Mi),x(13,Fi,f(12,Si)))),l(),c("integerOnly",!0)("length",5),l(5),Ue(" ",o.showEmail?(p=(p=o.verificationForm.get("email"))==null?null:p.value)!==null&&p!==void 0?p:"":We(14,8,(p=(p=o.verificationForm.get("email"))==null?null:p.value)!==null&&p!==void 0?p:"","email")," "),l(3),je(o.showEmail?"pi pi-eye-slash":"pi pi-eye"),l(),c("loading",o.submissionLoading)}},dependencies:[j,V,N,D,A,L,Et,Oe,T,I,B,Ct],styles:[".form-card[_ngcontent-%COMP%]{color:var(--text-color-1)}.form-card[_ngcontent-%COMP%]   .verification-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch;gap:0;flex-wrap:nowrap;padding-left:2.5rem;padding-right:2.5rem;margin:1rem 0;width:100%;gap:1rem;font-size:var(--font-size-medium);font-weight:var(--font-weight-normal)}.form-card[_ngcontent-%COMP%]   .verification-form[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{align-self:center}.form-card[_ngcontent-%COMP%]   .verification-form[_ngcontent-%COMP%]   .address-box-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:center;gap:0;flex-wrap:nowrap}.form-card[_ngcontent-%COMP%]   .verification-form[_ngcontent-%COMP%]   .address-box-container[_ngcontent-%COMP%]   .address-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-items:center;gap:1ch;flex-wrap:nowrap;color:var(--text-color-2)}.form-card[_ngcontent-%COMP%]   .verification-form[_ngcontent-%COMP%]   .address-box-container[_ngcontent-%COMP%]   .email-mask-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;color:var(--basic-affordances-color)}[_nghost-%COMP%]     .p-inputotp-input{padding:.8rem .75rem}"]});let n=r;return n})();var ke=(()=>{let r=class r{constructor(e){this.authenticationService=e}canActivate(){return!!this.authenticationService.emailToVerify}canDeactivate(){return this.authenticationService.emailToVerify=null,!0}static asCanActivateFn(){return r.emailVerificationActivateFnGuard}static asCanDeactivateFn(){return r.emailVerificationDeactivateFnGuard}};r.emailVerificationActivateFnGuard=()=>_e(r).canActivate(),r.emailVerificationDeactivateFnGuard=()=>_e(r).canDeactivate(),r.\u0275fac=function(i){return new(i||r)(De(k))},r.\u0275prov=Ne({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var ki=()=>({validation:"required",message:"a password is required"}),Ei=()=>["pattern","minlength","maxlength"],Ii=n=>({validation:n,message:"a password must be at least 8 characters long, and contain at least one lowercase letter, one uppercase letter, and one special character."}),Tt=(n,r)=>[n,r],Ti=()=>({validation:"required",message:"you need to confirm your password"}),Ni=()=>({customValidation:"passwordsDoNotMatch",message:"passwords do not match"});function Di(n,r){if(n&1){let t=q();a(0,"form",2),y("ngSubmit",function(){_(t);let i=h();return C(i.onSubmit())}),a(1,"section",3)(2,"div",4)(3,"label",5),m(4,"New password*"),s(),a(5,"dd24-input",6),d(6,"p-password",7),s()(),a(7,"div",4)(8,"label",8),m(9," Confirm new password* "),s(),a(10,"dd24-input",9),d(11,"p-password",10),s()()(),d(12,"p-button",11),s()}if(n&2){let t=h();c("formGroup",t.resetPasswordForm),l(5),c("errorMessages",F(12,Tt,f(8,ki),x(10,Ii,f(9,Ei)))),l(),c("feedback",!0)("strongRegex",t.environment.passwordStrongPattern)("mediumRegex",t.environment.passwordMediumPattern),l(4),c("errorMessages",F(17,Tt,f(15,Ti),f(16,Ni))),l(),c("feedback",!1),l(),c("loading",t.submissionLoading)}}function Vi(n,r){n&1&&(a(0,"p"),m(1,"You can log in to your account"),s(),d(2,"p-button",12))}var Nt=(()=>{let r=class r{constructor(e,i,o,p){this.route=e,this.formBuilder=i,this.authentication=o,this.message=p,this.resettedSuccessfully=!1,this.submissionLoading=!1,this.environment=G}ngOnInit(){this.route.params.pipe(X(1)).subscribe(e=>{this.id=e.id,this.token=e.token}),this.resetPasswordForm=this.formBuilder.group({newPassword:new v(null,{validators:[g.required,g.minLength(8),g.pattern(G.passwordPattern)],updateOn:"blur"}),confirmNewPassword:new v(null,{validators:[g.required,this.validateConfirmPassword.bind(this)],updateOn:"blur"})})}onSubmit(){if(M.forceValidation(this.resetPasswordForm.controls.confirmNewPassword),this.resetPasswordForm.invalid){M.markAllAsDirty(this.resetPasswordForm);return}this.submissionLoading=!0,this.authentication.resetForgottenPassword({userId:this.id,token:this.token,newPassword:this.resetPasswordForm.value.newPassword}).subscribe({next:this.onSubmissionSuccess.bind(this),error:this.onSubmissionError.bind(this)})}onSubmissionSuccess(){this.submissionLoading=!1,this.resettedSuccessfully=!0}onSubmissionError(e){this.submissionLoading=!1,e.error.status>=500?this.displayError("Server error","Please try again later"):e.error.status>=400?this.displayError("Invalid submission","Paste the url you received and try again"):e.error.status===0?this.displayError("Network error","Check your connection and try again"):this.displayError("An error occurred","Please try again")}displayError(e,i){this.message.add({severity:"error",summary:e,detail:i})}validateConfirmPassword(e){return e.value===this.resetPasswordForm?.controls.newPassword.value?{}:{passwordsDoNotMatch:!0}}};r.\u0275fac=function(i){return new(i||r)(u(de),u(R),u(k),u(E))},r.\u0275cmp=P({type:r,selectors:[["dd24-reset-password-page"]],standalone:!0,features:[O],decls:5,vars:1,consts:[[1,"form-card","dd24-auth-form"],[1,"reset-password-form",3,"formGroup"],[1,"reset-password-form",3,"ngSubmit","formGroup"],[1,"inputs"],[1,"input"],["for","new-password"],["controlName","newPassword",3,"errorMessages"],["type","password","formControlName","newPassword","name","new-password","toggleMask","true","placeholder","A strong password","inputId","new-password","autocomplete","new-password",1,"p-fluid",3,"feedback","strongRegex","mediumRegex"],["for","confirm-new-password"],["controlName","confirmNewPassword",3,"errorMessages"],["type","password","formControlName","confirmNewPassword","name","confirm-new-password","toggleMask","true","placeholder","The same as above","inputId","confirm-new-password","autocomplete","new-password",1,"p-fluid",3,"feedback"],["label","Reset","type","submit",1,"reset-submit",3,"loading"],["label","Login","routerLink","../login",1,"login-btn"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"h1"),m(2,"Reset your password"),s(),b(3,Di,13,20,"form",1)(4,Vi,3,0),s()),i&2&&(l(3),S(3,o.resettedSuccessfully?4:3))},dependencies:[T,I,j,V,N,D,A,L,B,J,H],styles:[".form-card[_ngcontent-%COMP%]{gap:1rem}.form-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.reset-password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:2rem;flex-wrap:nowrap;padding-left:3rem;padding-right:3rem;font-size:var(--font-size-medium);width:100%}.reset-password-form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:1em;flex-wrap:nowrap}.reset-password-form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:0;flex-wrap:nowrap}.login-btn[_ngcontent-%COMP%]{align-self:stretch}"]});let n=r;return n})();var Ai=[{path:"",component:kt,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",title:"Login",component:St},{path:"register",title:"Sign Up",component:Ft,resolve:{countries:xt.asResolveFn()}},{path:"forgot-password",title:"Forgot Password",component:Ot},{path:"reset-password/:id/:token",title:"Reset Password",component:Nt},{path:"verify-email",title:"Verify Email",component:It,canActivate:[ke.asCanActivateFn()],canDeactivate:[ke.asCanDeactivateFn()]}]}],_r=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=ie({type:r}),r.\u0275inj=te({imports:[me,tt.forChild(Ai)]});let n=r;return n})();export{_r as AuthRoutingModule};
