import{B as et,D as it,y as k}from"./chunk-MKDZLMUD.js";import{$ as B,Ba as y,Eb as K,Fa as M,Gb as q,Ha as N,Ia as $,Ka as C,Pa as c,Qa as u,Ra as I,Ub as W,Va as H,Vb as G,Wa as S,Wb as J,Xa as g,Xb as Q,Y as x,Yb as X,da as F,ea as j,fb as l,gb as P,hb as w,ib as V,ja as R,oa as L,ob as O,pb as Y,qa as a,qb as E,ra as h,sc as Z,tc as tt,xb as m,yb as f,zb as T}from"./chunk-3SA3UHWU.js";var A=function(t){return t.buying="buying",t.selling="selling",t}(A||{});var U=function(t){return t.active="active",t.pending="pending",t.aborted="aborted",t.rejected="rejected",t.accepted="closed",t}(U||{});var b=(()=>{let i=class i{constructor(e){this._ownBid=null,this._user=null,this._lastBidder=null,this._id=String(e.id),this._title=e.title,this._conditions=e.conditions??null,this._country=e.country,this._city=e.city,this._endTime=new Date(e.endTime),this._status=e.status,this._currency=e.currency,this._category=e.category??null,this._description=e.description??null,this._bids=e.numberOfBids??null,this._userId=String(e.userId)??null,this._lastBidderId=String(e.currentBidderId)??null,this._picturesUrls=e.picturesUrls??(e.pictureUrl?[e.pictureUrl]:[]),this._ownBid=e.ownBid??null,this._isOver=this._status!==i.STATUSES.active}get id(){return this._id}get title(){return this._title}get conditions(){return this._conditions}get country(){return this._country}get city(){return this._city}get endTime(){return this._endTime}get status(){return this._status}get currency(){return this._currency}get category(){return this._category}get description(){return this._description}get bids(){return this._bids}get userId(){return this._userId}get lastBidderId(){return this._lastBidderId}get picturesUrls(){return this._picturesUrls}get pictureUrl(){return this._picturesUrls[0]??null}get ownBid(){return this._ownBid}get user(){return this._user}set user(e){this._user=e}get lastBidder(){return this._lastBidder}set lastBidder(e){this._lastBidder=e}get winner(){return this._lastBidder}set winner(e){this._lastBidder=e}get isOver(){return this._isOver}};i.STATUSES=U,i.TYPES=k;let t=i;return t})(),nt=class extends b{constructor(i){super(i),this._highestBid=null,this._minimumBid=i.minimumBid??i.startingBid??i.lastBid,this._highestBid=i.highestBidSoFar??null}get minimumBid(){return this._minimumBid}get lastBid(){return this._highestBid??this._minimumBid}get winningBid(){return this._isOver?this._highestBid:null}get winnerId(){return this._isOver?this._lastBidderId:null}get lastBidDescription(){return this._highestBid?"highest bid":"minimum bid"}get ruleset(){return k.silent}get kind(){return A.selling}canBeBiddenOn(){return!this._ownBid}validateBid(i){return i<this._minimumBid?{min:!0}:null}newBidDescription(){return`at least CURRENCY{${this._minimumBid}|${this.currency}}`}getErrorMessage(i){return i==="min"?`Bid must be at least CURRENCY{${this._minimumBid}|${this.currency}}`:""}},bt=(()=>{let i=class i extends b{constructor(e){super(e),this._maximumStartingBid=e.maximumBid??e.startingBid??e.lastBid,this._lowestBid=e.lowestBidSoFar??this._maximumStartingBid}get maximumStartingBid(){return this._maximumStartingBid}get lowestBid(){return this._lowestBid}get lastBid(){return this._lowestBid}get winningBid(){return this._isOver?this._lowestBid:null}get winnerId(){return this._isOver?this._lastBidderId:null}get lastBidDescription(){return this._lowestBid===this._maximumStartingBid?"maximum starting bid":"lowest bid"}get ruleset(){return k.reverse}get kind(){return A.buying}canBeBiddenOn(){return!this._ownBid||this._ownBid>this._lowestBid}nextValidBid(){return this._lowestBid-i.MINIMUM_BID_DIFFERENCE>0?this._lowestBid-i.MINIMUM_BID_DIFFERENCE:this._lowestBid-.01}validateBid(e){return e>this.nextValidBid()?{max:!0}:e<0?{min:!0}:null}newBidDescription(){return`no more than CURRENCY{${this.nextValidBid()}|${this.currency}}`}getErrorMessage(e){return e==="max"?`Bid must not be higher than CURRENCY{${this.nextValidBid()}|${this.currency}}`:"Bid must not be negative"}};i.MINIMUM_BID_DIFFERENCE=1;let t=i;return t})();var mt=()=>["help"],pt=t=>({overlay:null,primary:t}),ht=t=>({outlets:t}),gt=t=>["/",t],rt=(()=>{let i=class i{constructor(){}stopPropagation(e){e.stopPropagation()}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=x({type:i,selectors:[["dd24-auction-ruleset-link"]],inputs:{ruleset:"ruleset"},standalone:!0,features:[O],decls:5,vars:12,consts:[[1,"auction-type"],["tabindex","0",1,"auction-type-link",3,"click","keypress","routerLink","fragment"],[1,"pi","pi-info-circle"]],template:function(n,r){n&1&&(c(0,"span",0),l(1),m(2,"uppercase"),c(3,"span",1),S("click",function(p){return r.stopPropagation(p)})("keypress",function(p){return r.stopPropagation(p)}),I(4,"i",2),u()()),n&2&&(a(),w("",f(2,3,r.ruleset+" AUCTION")," "),a(2),M("routerLink",E(10,gt,E(8,ht,E(6,pt,Y(5,mt)))))("fragment",r.ruleset+"-auction"))},dependencies:[G,tt],styles:[".auction-type[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-items:center;gap:.5ch;flex-wrap:nowrap;font-size:var(--font-size-large);color:var(--accent-color-2);font-weight:var(--font-weight-bolder);text-overflow:ellipsis;white-space:nowrap}.auction-type-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer}.auction-type-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:var(--font-size-large);color:var(--accent-color-2);font-weight:var(--font-weight-bolder)}"]});let t=i;return t})();var at=(()=>{let i=class i{transform(e){return e.charAt(0).toUpperCase()+e.slice(1)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=B({name:"oneCharUpper",type:i,pure:!0,standalone:!0});let t=i;return t})();var ot=(()=>{let i=class i{constructor(e){this.locale=e,this.datePipe=new J(e)}transform(e){let n=new Date(e),r=this.dayDifference(n);return r<0?this.datePipe.transform(n,"dd/MM/yyyy"):r===0?this.datePipe.transform(n,"'today at' HH:mm"):r<=1?this.datePipe.transform(n,"'tomorrow at' HH:mm"):r<7?this.datePipe.transform(n,"EEEE 'at' HH:mm"):this.datePipe.transform(n,"EEEE dd/MM/yyyy 'at' HH:mm")}dayDifference(e){let n=new Date().setHours(0,0,0,0);return(new Date(e).setHours(0,0,0,0)-n)/(1e3*60*60*24)}};i.\u0275fac=function(n){return new(n||i)(h(K,16))},i.\u0275pipe=B({name:"localDate",type:i,pure:!0,standalone:!0});let t=i;return t})();var s=function(t){return t[t.years=0]="years",t[t.months=1]="months",t[t.days=2]="days",t[t.hours=3]="hours",t[t.minutes=4]="minutes",t[t.seconds=5]="seconds",t}(s||{}),st=(()=>{let i=class i{transform(e,n="seconds"){let r=n in s?s[n]:s.seconds;if(e<=0)return"now";let d=this.getValues(e,r);return d.years||d.months||d.days||r<s.days?this.buildLongString(d,r):this.buildShortString(d,r)}buildLongString(e,n){let{years:r,months:d,days:p,hours:v,minutes:dt,seconds:ut}=e,_=[];return r&&_.push(this.pluralize("year",r)),(d||r)&&n>=s.months&&_.push(this.pluralize("month",d)),n>=s.days&&_.push(this.pluralize("day",p)),n>=s.hours&&_.push(this.pluralize("hour",v)),n>=s.minutes&&_.push(this.pluralize("minute",dt)),n>=s.seconds&&_.push(this.pluralize("second",ut)),_.filter(lt=>lt.length).join(", ")}buildShortString(e,n){let{hours:r,minutes:d,seconds:p}=e,v=[];return v.push(this.formatNumber(r)),n>=s.minutes&&v.push(this.formatNumber(d)),n>=s.seconds&&v.push(this.formatNumber(p)),v.join(":")}getValues(e,n){let r={};return r.years=Math.floor(e/31536e3),n===s.years||(e%=31536e3,r.months=Math.floor(e/2592e3),n===s.months)||(e%=2592e3,r.days=Math.floor(e/86400),n===s.days)||(e%=86400,r.hours=Math.floor(e/3600),n===s.hours)||(e%=3600,r.minutes=Math.floor(e/60),n===s.minutes)||(r.seconds=e%60),r}pluralize(e,n){return n?`${n} ${e}${n!==1?"s":""}`:""}formatNumber(e){return e=e??0,e<10?`0${e}`:e.toString()}};i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=B({name:"interval",type:i,pure:!0,standalone:!0});let t=i;return t})();var ct=(()=>{let i=class i{constructor(e){this.changeDetector=e,this.timeAmount=0}ngOnInit(){this.timeAmount=Math.floor((this.endDate.getTime()-Date.now())/1e3),this.timerTimeout=setTimeout(()=>{this.timerInterval=setInterval(()=>{this.timeAmount-=60,this.changeDetector.markForCheck(),this.timeAmount<=0&&clearInterval(this.timerInterval)},6e4)},this.timeAmount%60)}ngOnDestroy(){clearTimeout(this.timerTimeout),clearInterval(this.timerInterval)}};i.\u0275fac=function(n){return new(n||i)(h(q))},i.\u0275cmp=x({type:i,selectors:[["dd24-timer"]],inputs:{endDate:"endDate"},standalone:!0,features:[O],decls:3,vars:6,consts:[[1,"auction-card-time-left-amount"]],template:function(n,r){n&1&&(c(0,"span",0),l(1),m(2,"interval"),u()),n&2&&(N("danger",r.timeAmount>0&&r.timeAmount<86400),a(),P(T(2,3,r.timeAmount,"minutes")))},dependencies:[st],changeDetection:0});let t=i;return t})();var z=function(t){return t.bid="bid",t.conclude="conclude",t}(z||{});function ft(t,i){if(t&1){let o=H();c(0,"img",11),S("error",function(){F(o);let n=g();return j(n.onImageError())}),u()}if(t&2){let o=g();M("src",o.auction.pictureUrl,L)}}function _t(t,i){t&1&&I(0,"i",12)}function yt(t,i){if(t&1&&l(0),t&2){let o=g();w(" ",o.auction.conditions," | ")}}function Ct(t,i){if(t&1&&(l(0),m(1,"oneCharUpper"),c(2,"span",9),l(3),m(4,"currency"),u()),t&2){let o=g();w(" ",f(1,2,o.auction.lastBidDescription),": "),a(3),P(T(4,4,o.auction.lastBid,o.auction.currency))}}function wt(t,i){t&1&&l(0," Time left: ")}function vt(t,i){if(t&1&&(l(0),m(1,"localDate")),t&2){let o=g(2);w(" (Until ",f(1,1,o.auction.endTime),") ")}}function xt(t,i){if(t&1&&(y(0,wt,1,0),m(1,"async"),I(2,"dd24-timer",13),y(3,vt,2,3),m(4,"async")),t&2){let o=g();C(0,f(1,3,o.windowService.isMobile$)===!1?0:-1),a(2),M("endDate",o.auction.endTime),a(),C(3,f(4,5,o.windowService.isMobile$)===!1?3:-1)}}function Bt(t,i){if(t&1&&(c(0,"span"),l(1),m(2,"localDate"),u()),t&2){let o=g();a(),w("Ended on ",f(2,1,o.auction.endTime),"")}}var ce=(()=>{let i=class i{constructor(e,n,r){this.windowService=e,this.authentication=n,this.router=r,this.cardStyle={},this.skipLocationChange=!1,this.loaded=new R,this.statuses=b.STATUSES,this.showImagePlaceholder=!1}ngOnInit(){this.loaded.emit()}onImageError(){this.showImagePlaceholder=!0}onClick(){this.auction.userId&&this.auction.userId===this.authentication.loggedUser?.id&&this.auction.status===b.STATUSES.pending?this.navigateToConclusion():this.navigateToDetails()}onKeyPress(e){e.key==="Enter"&&this.onClick()}navigateToDetails(){this.router.navigate(["",{outlets:{overlay:["auctions",this.auction.id]}}],{skipLocationChange:this.skipLocationChange,queryParamsHandling:"merge"})}navigateToConclusion(){this.router.navigate(["/","txn",this.auction.id,z.conclude])}};i.\u0275fac=function(n){return new(n||i)(h(it),h(et),h(Z))},i.\u0275cmp=x({type:i,selectors:[["dd24-auction-card"]],inputs:{auction:"auction",cardStyle:"cardStyle",skipLocationChange:"skipLocationChange"},outputs:{loaded:"loaded"},standalone:!0,features:[O],decls:18,vars:11,consts:[["tabindex","0",1,"auction-card",3,"click","keypress"],[1,"auction-card-image-container"],["alt","Auction image",1,"auction-card-image",3,"src"],[1,"auction-card-title-container"],[1,"auction-card-title","wk-nowrap"],[1,"auction-card-secondary-line","wk-nowrap"],[1,"auction-card-auction-type",3,"ruleset"],[1,"auction-card-details-container"],[1,"auction-card-sum"],[1,"auction-card-sum-amount"],[1,"auction-card-time-left","wk-nowrap"],["alt","Auction image",1,"auction-card-image",3,"error","src"],[1,"auction-card-missing-image","pi","pi-image"],[2,"font-weight","var(--font-weight-bolder)",3,"endDate"]],template:function(n,r){n&1&&(c(0,"div",0),S("click",function(){return r.onClick()})("keypress",function(p){return r.onKeyPress(p)}),c(1,"div",1),y(2,ft,1,1,"img",2)(3,_t,1,0),u(),c(4,"div",3)(5,"span",4),l(6),u(),c(7,"span",5),y(8,yt,1,1),l(9),u()(),c(10,"dd24-auction-ruleset-link",6),l(11),u(),c(12,"div",7)(13,"span",8),y(14,Ct,5,7,"span",9),u(),c(15,"span",10),y(16,xt,5,7)(17,Bt,3,3),u()()()),n&2&&($(r.cardStyle),a(2),C(2,r.auction.pictureUrl&&!r.showImagePlaceholder?2:3),a(4),P(r.auction.title),a(2),C(8,r.auction.conditions?8:-1),a(),V(" from ",r.auction.city,", ",r.auction.country," "),a(),M("ruleset",r.auction.ruleset),a(),P(r.auction.ruleset),a(3),C(14,r.auction.status===r.statuses.active?14:-1),a(2),C(16,r.auction.isOver?17:16))},dependencies:[X,W,Q,rt,at,ot,ct],styles:['.auction-card[_ngcontent-%COMP%]{display:grid;grid-template:"image title" auto "image type" auto "image details" minmax(0,1fr)/auto 1fr;grid-gap:0;justify-items:stretch;align-items:stretch;justify-content:stretch;align-content:stretch;min-height:var(--card-height);width:100%;border:var(--border);border-radius:var(--border-radius-large);overflow:hidden;cursor:pointer;background-color:var(--component-color)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]{display:grid;grid-template:"type type" auto "image title" auto "image details" auto/auto 1fr;grid-gap:0;justify-items:stretch;align-items:stretch;justify-content:stretch;align-content:stretch;align-items:center;padding-bottom:1rem;border-radius:0;border-right-width:0;border-left-width:0}}.auction-card[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:0;flex-wrap:nowrap;grid-area:image;height:var(--card-height);width:var(--card-height);border-right:var(--border)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-image-container[_ngcontent-%COMP%]{height:calc(var(--card-height) / 2);width:calc(var(--card-height) / 2);border-radius:var(--border-radius-medium);border:var(--border);margin-left:1rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-image[_ngcontent-%COMP%]{object-fit:cover;max-width:100%;max-height:100%}.auction-card[_ngcontent-%COMP%]   .auction-card-missing-image[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:0;flex-wrap:nowrap;height:100%;width:100%;font-size:8rem;color:var(--border-color)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-missing-image[_ngcontent-%COMP%]{font-size:3rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:start;gap:0;flex-wrap:nowrap;color:var(--text-color-1);padding:1rem;grid-area:title;overflow:hidden}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-title-container[_ngcontent-%COMP%]{padding:0 1rem;justify-content:center}}.auction-card[_ngcontent-%COMP%]   .auction-card-title[_ngcontent-%COMP%]{font-size:var(--font-size-large);font-weight:var(--font-weight-bolder);line-height:var(--line-height-large)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-title[_ngcontent-%COMP%]{line-height:normal}}.auction-card[_ngcontent-%COMP%]   .auction-card-secondary-line[_ngcontent-%COMP%]{font-size:var(--font-size-medium);color:var(--text-color-3)}.auction-card[_ngcontent-%COMP%]   .auction-card-auction-type[_ngcontent-%COMP%]{grid-area:type;padding:.2rem 1rem}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-auction-type[_ngcontent-%COMP%]{padding:1rem 1rem .2rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:start;gap:.1em;flex-wrap:nowrap;grid-area:details;color:var(--text-color-1);padding:1rem;padding-top:0;font-size:var(--font-size-medium);font-weight:var(--font-weight-regular)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-details-container[_ngcontent-%COMP%]{padding:0 1rem}}.auction-card[_ngcontent-%COMP%]   .auction-card-sum[_ngcontent-%COMP%]{font-weight:var(--font-weight-bolder);font-size:var(--font-size-large);line-height:var(--line-height-large)}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-sum[_ngcontent-%COMP%]{font-size:var(--font-size-medium);line-height:var(--line-height-medium)}.auction-card[_ngcontent-%COMP%]   .auction-card-sum[_ngcontent-%COMP%]   .auction-card-sum-amount[_ngcontent-%COMP%]{color:var(--accent-color-2);font-weight:var(--font-weight-bolder)}}.auction-card[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%]{font-size:var(--font-size-medium);color:var(--text-color-3)}.auction-card[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%], .auction-card[_ngcontent-%COMP%]   .auction-card-secondary-line[_ngcontent-%COMP%], .auction-card[_ngcontent-%COMP%]   .auction-card-title[_ngcontent-%COMP%]{-webkit-line-clamp:2}@media (max-width: 768px){.auction-card[_ngcontent-%COMP%]   .auction-card-time-left[_ngcontent-%COMP%], .auction-card[_ngcontent-%COMP%]   .auction-card-secondary-line[_ngcontent-%COMP%]{-webkit-line-clamp:1}}'],changeDetection:0});let t=i;return t})();export{A as a,U as b,nt as c,bt as d,rt as e,at as f,ot as g,ct as h,z as i,ce as j};
